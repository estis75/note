@require: stdjareport-math
@require: math-sub
@require: azmath/azmath
@require: itemize
@require: diagram

let measureble-sp = ${\paren{\mathrm{\Omega}, \mathfrak{B}}} in
let measure-sp = ${\paren{\mathrm{\Omega}, \mathfrak{B}, m}} in
let-math \set-intentional object limit =
  let rel = math-char MathPunct in
  let-math \semicolon-rel = rel `;` in
  ${\math-skip!(1pt) \pb{\math-skip!(1pt) #object \semicolon-rel #limit\math-skip!(1pt)}\math-skip!(1pt)} 
in
let-math \family-array object =
  ${\math-skip!(1pt) \pb{\math-skip!(1pt)#object\math-skip!(1pt)}\math-skip!(1pt)} 
in
let-math \outer-measure m = ${#m^*} in
document (|
  title = {解析学セミナー\: ルベーグ積分超入門};
  univ = {京都工芸繊維大学 工芸科学部 設計工学域 情報工学課程};
  number = {B4};
  author = {estis_jk};
  date = {2021/07/18};
  show-toc = true;
|) '<

  +preface {
    測度論で確率論を✝完全理解✝したい．
    ついでに情報理論もやりたいし， 更には最近始まった情報幾何のゼミでも活かしていきたい．
    ところで君， 学部なんだったっけ？
  }
  
  +chapter{抽象的測度論}<
    +p{
      普通の本だと先にボレル集合をとってきて測度を構成して……ってやるけど， 
      今回の本ではとりあえず測度・可測関数の性質を確認してから構成してという流れでした．
      それに従って実装をしていきます．
    }

    +section{可測性，測度空間} <
      +definition?:({可測空間})?:(`measurable-space`){
        集合${\mathrm{\Omega}}の部分集合の族${\mathfrak{B}}で，以下をみたすものを\dfn{${\sigma}代数}という．
        \enumerate{
          * ${\mathrm{\Omega} \in \mathfrak{B}}
          * ${A \in \mathfrak{B} \Rightarrow A^\complement \in \mathfrak{B}}
          * ${\mathfrak{B}}の元の族${\brace{A_i}_{i \in \mathbb{N}}} について，${\bigcup_{i \in \mathbb{N}} A_i \in \mathfrak{B}}
        }
        ${\mathrm{\Omega}}とその上の${\sigma}代数${\mathfrak{B}}の組${\paren{\mathrm{\Omega}, \mathfrak{B}}}を\dfn{可測空間}といい，
        ${\sigma}代数${\mathfrak{B}}の元を\dfn{可測集合}という．
        (特に， 確率論では可測集合のことを事象という．)
      }
      +p{
        note: 族が${\mathbb{N}}-indexedだけど，有限個の族を考えるときは適切に${\emptyset}を加えることで同じように考えられる．
      }
      % 
      % prob． なんかenumerate環境がおかしい， 斜体になる
      % ans． theorem環境の引数で文字をイタリックにするやつが渡されてたのでそれがダメだったっぽい
      % 
      +theorem{
        ${#measureble-sp}を可測空間とする．${\mathfrak{B}}の元の族${\brace{A_i}_{i \in \mathbb{N}}}について以下が成り立つ．
        \enumerate{
          * ${\emptyset \in \mathfrak{B}}
          * ${\bigcap_{i \in \mathbb{N}} A_i \in \mathfrak{B}}
          * ${\limsup_{n \to \infty} A_i, \liminf_{n \to \infty} A_i \in \mathfrak{B}}
        }
      }
      +proof<
        +enumerate{
          * def\ref(`def:measurable-space`); (1)，(2)より，${\mathrm{\Omega}^\complement = \emptyset \in \mathfrak{B}}
          * 
            \alignat(2)( ${
                  |A_i \in \mathfrak{B} \paren{i \in \mathbb{N}} |\Rightarrow A_i^\complement \in \mathfrak{B} \paren{i \in \mathbb{N}}                                                        | \text!{（∵def\ref(`def:measurable-space`); (2)）}  | 
                  |                                              |\Rightarrow \bigcup_{i \in \mathbb{N}} A_i^\complement \in \mathfrak{B}                                                      | \text!{（∵def\ref(`def:measurable-space`); (3)）}  | 
                  |                                              |\Rightarrow \paren{\bigcup_{i \in \mathbb{N}} A_i^\complement}^\complement = \bigcap_{i \in \mathbb{N}} A_i \in \mathfrak{B} | \text!{（∵ド・モルガンの定理）}                    | 
                  |}
              );
          
            より示せた．
          * ${\limsup_{n \to \infty} A_i = \bigcap_{i=1}^{\infty} \bigcup_{j = i}^{\infty} A_j}, 
            ${\liminf_{n \to \infty} A_i = \bigcup_{i=1}^{\infty} \bigcap_{j = i}^{\infty} A_j}なので，
            (2)とdef\ref(`def:measurable-space`); (3)より従う．
        }
      >
      +definition{
        ${+\infty}は${\forall r \in \mathbb{R}, r < +\infty}を，
        ${-\infty}は${\forall r \in \mathbb{R}, r > -\infty}を満たすものとして定める．
        また，${\mathbb{R}^{+} \coloneq \sqbracket{0, +\infty}}，
        ${\mathbb{R}^{*} \coloneq \sqbracket{-\infty, +\infty}}として定める．
      }

      +definition?:({測度})?:(`measure`){
        可測空間${#measureble-sp}上の\dfn{測度}${m \colon-rel \mathfrak{B} \to \mathbb{R}^{+}}は以下を満たすもの．
        \enumerate{
          * ${A \in \mathfrak{B}}について，${\app{m}{A} \geq 0}．特に，${\app{m}{\emptyset}= 0}
          * ${\mathfrak{B}}の元の族${\brace{A_i}_{i \in \mathbb{N}}} について，
            どの${i, j \in \mathbb{N} \paren{i \neq j}}で互いに素（ ${A_i \cap A_j = \emptyset}）ならば，
            \eqn(${\app{m}{\bigcup_{i \in \mathbb{N}} A_i} = \sum_{i \in \mathbb{N}} \app{m}{A_i} \notag});
        }
        可測空間${#measureble-sp}の${\mathrm{\Omega}, \mathfrak{B}}と測度${m}の組${#measure-sp}を\dfn{測度空間}という．
        (特に，可測空間上の測度${P}であって, ${\app{P}{\mathrm{\Omega}} = 1}であるような測度空間を確率空間という．)
      }

      +definition?:({${\sigma}有限性})?:(`sigma-finite`) {
        測度空間${#measure-sp}について，
          ${\app{m}{\Omega_i} < \infty }
          かつ${\bigcup_{i \in \mathbb{N}} \Omega_i = \mathrm{\Omega}}
        をみたす互いに素な可測集合の族${\brace{\Omega_i}_{i \in \mathbb{N}}}が存在するとき，
        測度空間${#measure-sp}を\dfn{${\sigma}有限}な測度空間という．
      }

      +theorem?*?:(`measurable-set-properties`){
        ${#measure-sp}を測度空間とする．${\mathfrak{B}}の元の族${\brace{A_i}_{i \in \mathbb{N}}}について以下が成り立つ．
        \enumerate{
          * ${A_i \subset A_{i+1} \paren{i \in \mathbb{N}} \Rightarrow \lim_{i \to \infty} \app{m}{A_i} = \app{m}{\bigcup_{i \in \mathbb{N}} A_i}} 
          * ${\app{m}{A_1} < \infty}かつ ${A_i \supset A_{i+1} \paren{i \in \mathbb{N}} \Rightarrow \lim_{i \to \infty} \app{m}{A_i} = \app{m}{\bigcap_{i \in \mathbb{N}} A_i}} 
          * ${\liminf_{i \to \infty} \app{m}{A_i} \geq \app{m}{\liminf_{i \to \infty} A_i}}
          * ${\app{m}{\bigcup_{i \in \mathbb{N}} A_i} < \infty \Rightarrow \limsup_{i \to \infty} \app{m}{A_i} \leq \app{m}{\limsup_{i \to \infty} A_i}}
        }
      }
      +proof<
        +enumerate{
          * ${B_1 \coloneq A_1, B_{i+1} \coloneq A_{i+1} - A_{i} = A_{i+1} \cap A_{i}^\complement \paren{i \in \mathbb{N}}}とおくと，
            族${\brace{B_i}_{i \in \mathbb{N}}}の要素はdef\ref(`def:measurable-space`);より${\mathfrak{B}}に含まれ，互いに素である．
            また，${A_i = \bigcup_{j=1}^{i} B_j}であるので，
            \alignat(2)(
              ${|\app{m}{\bigcup_{i \in \mathbb{N}} A_i} | = \app{m}{\bigcup_{i \in \mathbb{N}} \bigcup_{j=1}^{i} B_j} ||
                | | = \app{m}{\bigcup_{i \in \mathbb{N}} B_i} ||
                | | = \sum_{i \in \mathbb{N}} \app{m}{B_i}| \text!{（∵${\sigma}加法性）} |
                | | = \lim_{j \to \infty} \sum_{i=1}^{j} \app{m}{B_i} ||
                | | = \lim_{j \to \infty} \app{m}{\bigcup_{i=1}^{j} B_i}| \text!{（∵${\sigma}加法性）} |
                | | = \lim_{j \to \infty} \app{m}{A_j} || 
                | }
            );
            より示せた．
          * ${B_{i} \coloneq A_1 - A_{i} = A_1 \cap A_{i}^\complement \paren{i \in \mathbb{N}}}とおくと，
            族${\brace{B_i}_{i \in \mathbb{N}}}の要素はdef\ref(`def:measurable-space`);より${\mathfrak{B}}に含まれ，${B_i \subset B_{i+1} \paren{i \in \mathbb{N}}}である．
            また，
            ${A_1 \supset B}ならば${\app{m}{A_1 - B} + \app{m}{B} = \app{m}{A_1} < \infty}なので，
            \alignat(2)(
              ${|\app{m}{\bigcap_{i \in \mathbb{N}} A_i} | = \app{m}{\bigcap_{i \in \mathbb{N}} \paren{A_1 - B_i}} ||
                | | = \app{m}{A_1 - \bigcup_{i \in \mathbb{N}} B_i} ||
                | | = \app{m}{A_1} - \app{m}{\bigcup_{i \in \mathbb{N}} B_i} ||
                | | = \app{m}{A_1} - \lim_{i \to \infty} \app{m}{B_i} | \text!{∵(1)} |
                | | = \lim_{i \to \infty} \paren{\app{m}{A_1} - \app{m}{B_i}} ||
                | | = \lim_{i \to \infty} \app{m}{A_1 - B_i} ||
                | | = \lim_{i \to \infty} \app{m}{A_i} ||
                |}
            );
            より示せた．
          * ${B_i \coloneq \bigcap_{j=i}^{\infty} A_j}とおくと，
            ${B_i \subset A_i, B_i \subset B_{i+1} \paren{i \in \mathbb{N}}}なので，
            \alignat(2)(
              ${| \app{m}{\liminf_{i \to \infty} A_i} | = \app{m}{\bigcup_{i \in \mathbb{N}} \bigcap_{j=i}^{\infty} A_j} ||
                | | = \app{m}{\bigcup_{i \in \mathbb{N}} B_i} ||
                | | = \lim_{i \to \infty} \app{m}{B_i}| \text!{∵(1)} |
                | | = \liminf_{i \to \infty} \app{m}{B_i} ||
                | | \leq \liminf_{i \to \infty} \app{m}{A_i} ||
                |}
            );
            より示せた．
          * ${A \coloneq \bigcup_{i \in \mathbb{N}} A_i}とおくと，
            \alignat(2)(
              ${| \app{m}{\limsup_{i \to \infty} A_i} | = \app{m}{\bigcap_{i \in \mathbb{N}} \bigcup_{j=i}^{\infty} A_j} ||
                | | = \app{m}{A} - \app{m}{\bigcup_{i \in \mathbb{N}} \paren{A - \bigcup_{j=i}^{\infty} A_j}} ||
                | | = \app{m}{A} - \lim_{i \to \infty} \app{m}{A - \bigcup_{j=i}^{\infty} A_j}| \text!{∵(1)} |
                | | = \lim_{i \to \infty} \paren{\app{m}{A} - \app{m}{A - \bigcup_{j=i}^{\infty} A_j}} ||
                | | = \lim_{i \to \infty} \app{m}{\bigcup_{j=i}^{\infty} A_j} ||
                | | = \limsup_{i \to \infty} \app{m}{\bigcup_{j=i}^{\infty} A_j} ||
                | | \geq \limsup_{i \to \infty} \app{m}{A_j} ||
                |}
            );
            より示せた．
        }
      >
    >

    +section{可測関数} <
      +definition?:({可測関数})?:(`measurable-function`) {
        ${#measure-sp}を測度空間とする．
        ${f \colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}について，
        任意の${a \in \mathbb{R}^{*}}で
        \eqn(${\app{f^{-1}}{\openclosebracket{a, \infty}} = \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} > a} \in \mathfrak{B} \notag});
        をみたすとき，${f}を\dfn{可測関数}という．
      }

      +proposition?*?:(`measurable-function-charactors`) {
        ${#measure-sp}を測度空間，${f \colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}を可測関数とする．
        任意の${a \in \mathbb{R}^{*}}で以下が成り立つ．
        \enumerate{
          * ${\app{f^{-1}}{\closeclosebracket{a, \infty}} = \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} \geq a} \in \mathfrak{B}}
          * ${\app{f^{-1}}{\openopenbracket{-\infty, a}} = \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} < a} \in \mathfrak{B}}
          * ${\app{f^{-1}}{\openclosebracket{-\infty, a}} = \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} \leq a} \in \mathfrak{B}}
        }
      }
      +proof<
        +enumerate{
          * 可測関数の定義より，任意の${a \in \mathbb{R}^{*}}, ${n \in \mathbb{N}}について
            \eqn(${\app{f^{-1}}{\openclosebracket{a-\frac{1}{n}, \infty}} = \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} > a-\frac{1}{n}} \in \mathfrak{B} \notag}); 
            で${\sigma}代数の加算無限個の和は閉じているので，
            \eqn(${\bigcup_{i \in \mathbb{N}} \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} > a-\frac{1}{n}} = \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} \geq a } \in \mathfrak{B}\notag});
          * (1)のcomplementを取ればよい．
          * 可測関数の${\openclosebracket{a, \infty}}の逆像に関するcomplementを取ればよい．
        }
      >
      +lemma?*?:(`measurable-function-charactors`) {
        ${#measure-sp}を測度空間，${f \colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}を可測関数とする．
        任意の${a, b \in \mathbb{R}^{*} \paren{a < b}}で以下が成り立つ．
        \enumerate{
          * ${\app{f^{-1}}{\openopenbracket{a, b}} \in \mathfrak{B}}
          * ${\app{f^{-1}}{\closeopenbracket{a, b}} \in \mathfrak{B}}
          * ${\app{f^{-1}}{\openclosebracket{a, b}} \in \mathfrak{B}}
          * ${\app{f^{-1}}{\closeopenbracket{a, b}} \in \mathfrak{B}}
          * ${\app{f^{-1}}{\brace{a}} \in \mathfrak{B}}
        }
      }
      +proof<
        +p{
          ${\app{f^{-1}}{\brace{-\infty}} \in \mathfrak{B}}，
          ${\app{f^{-1}}{\brace{+\infty}} \in \mathfrak{B}}が確認できれば，
          prop\ref(`prop:measurable-function-charactors`);より2つの積集合
          （と必要であれば${\brace{+\infty}}，${\brace{-\infty}}を${f}で引き戻したものの和集合）を取ればよい．
        }
        +p{
          prop\ref(`prop:measurable-function-charactors`);より，
          ${\app{f^{-1}}{\closeopenbracket{-\infty, a}}}, ${\app{f^{-1}}{\openclosebracket{a, \infty}} \in \mathfrak{B}}なので，
          \align(${
            |\bigcap_{i \in \mathbb{N}}\ \app{f^{-1}}{\closeopenbracket{-\infty, -i}} |= \app{f^{-1}}{\brace{-\infty}} \in \mathfrak{B} \notag
            |\bigcap_{i \in \mathbb{N}}\ \app{f^{-1}}{\openclosebracket{i, \infty}}   |= \app{f^{-1}}{\brace{\infty}} \in \mathfrak{B} \notag
          |});
          以上より示せた．
        }
      >

      +lemma?*?:(`measurable-function-charactors-2`) {
        ${#measure-sp}を測度空間とする．${f, g\colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}, ${f_i \colon-rel \mathrm{\Omega} \to \mathbb{R}^{*} \paren{i \in \mathbb{N}}}を可測関数とする．
        このとき，以下が成り立つ．
        \enumerate{
          * ${\app{\paren{f + g}}{\omega} \coloneq \app{f}{\omega} + \app{g}{\omega}}, 
            ${\app{\paren{f \cdot g}}{\omega} \coloneq \app{f}{\omega} \cdot \app{g}{\omega}}と定義すると，${f+g}, ${f\cdot g}は可測関数
          * ${\sup \set-intentional{\app{f_i}{\omega}}{i \in \mathbb{N}}}, 
            ${\inf \set-intentional{\app{f_i}{\omega}}{i \in \mathbb{N}}}は可測関数
          * ${\limsup_{i \to \infty} \app{f_i}{\omega}}，${\liminf_{i \to \infty} \app{f_i}{\omega}}は可測関数
          * 任意の${\omega \in \mathrm{\Omega}}で${\lim_{i \to \infty} \app{f_i}{\omega} \in \mathbb{R}^{*}}ならば，
            ${\lim_{i \to \infty} \app{f_i}{\omega}}は可測関数
        }
      }
      +proof<
        +enumerate{
          * ${\app{\paren{f + g}^{-1}}{\openclosebracket{a, \infty}} \in \mathbb{B}}を示せばよい．
            \align(${
              |\app{\paren{f + g}^{-1}}{\openclosebracket{a, \infty}} | = \set-intentional{\omega \in \mathrm{\Omega}}{\app{\paren{f + g}}{\omega} > a} \notag
              |                                                       | = \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} + \app{g}{\omega} > a} \notag
              |                                                       | = \bigcup_{r \in \mathbb{R}} \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} > a - r } \cap \set-intentional{\omega \in \mathrm{\Omega}}{\app{g}{\omega} > r} \label!(`measurable-function-charactors-2-1`)
              |                                                       | = \bigcup_{q \in \mathbb{R}} \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} > a - q} \cap \set-intentional{\omega \in \mathrm{\Omega}}{\app{g}{\omega} > q} \label!(`measurable-function-charactors-2-2`)
              |                                                       | \in \mathfrak{B} \label!(`measurable-function-charactors-2-3`)
            |});
            ${\text!{\ref-eq(`measurable-function-charactors-2-1`);} \to \text!{\ref-eq(`measurable-function-charactors-2-2`);} \colon-rel}左右の包含を示して等号が成立することを確認する．
            \listing{
              * ${\text!{\ref-eq(`measurable-function-charactors-2-1`);} \subset \text!{\ref-eq(`measurable-function-charactors-2-2`);} \colon-rel}
                \align(${
                  | \text!{\ref-eq(`measurable-function-charactors-2-1`);} \ni \omega' | \Rightarrow \exists r \in \mathbb{R}, \omega' \in \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} + r > a} \cap \set-intentional{\omega \in \mathrm{\Omega}}{\app{g}{\omega} > r } \notag 
                  |                 | \Rightarrow \exists r \in \mathbb{R}, \exists \epsilon > 0, \omega' \in \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} + r > \paren{a-\epsilon}} \cap \set-intentional{\omega \in \mathrm{\Omega}}{\app{g}{\omega} > \paren{r+\epsilon}} \notag
                  |                 | \Rightarrow \exists r \in \mathbb{R}, \exists \epsilon > 0, r \leq \exists q \leq r+\epsilon, \notag
                  |                 | \and-also \omega' \in \set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} + q > a} \cap \set-intentional{\omega \in \mathrm{\Omega}}{\app{g}{\omega} > q } \text!{（∵実数の稠密性）}\notag
                  |                 | \Rightarrow \omega' \in \text!{\ref-eq(`measurable-function-charactors-2-2`);} \notag
                |});
                より示せた．
              * ${\text!{\ref-eq(`measurable-function-charactors-2-1`);} \supset \text!{\ref-eq(`measurable-function-charactors-2-2`);} \colon-rel}
                ${\mathbb{R} \supset \mathbb{Q}}なので示せた．
            }
            ${\text!{\ref-eq(`measurable-function-charactors-2-2`);} \to \text!{\ref-eq(`measurable-function-charactors-2-3`);} \colon-rel} ${\mathbb{Q}}の要素は加算無限個なので${\sigma}代数の性質より従う．

          * 任意の${a \in \mathbb{R}^{*}}について，${\openclosebracket{a, \infty}}の逆像が${\mathfrak{B}}に入っていればよい．
            ${a \in \mathbb{R}^{*}}を固定する．
            ${\sup }の定義から，${\sup \set-intentional{\app{f_i}{\omega}}{i \in \mathbb{N}} > a}ならば，
              あるインデックス${i}が存在して${\set-intentional{\omega \in \mathrm{\Omega}}{\app{f_i}{\omega} > a}}なので，
            \eqn(${
              \set-intentional{\omega \in \mathrm{\Omega}}{\sup \set-intentional{\app{f_i}{\omega}}{i \in \mathbb{N}} > a} 
                \subset \bigcup_{i \in \mathbb{N}} \set-intentional{\omega \in \mathrm{\Omega}}{\app{f_i}{\omega} > a} \notag
            });
            一方，${\omega \in \bigcup_{i \in \mathbb{N}} \set-intentional{\omega \in \mathrm{\Omega}}{\app{f_i}{\omega} > a}}についても，
            あるインデックス${i}について${\app{f_i}{\omega} > a}なので，${\sup}の定義より，
            \eqn(${
              \omega \in \set-intentional{\omega \in \mathrm{\Omega}}{\sup \set-intentional{\app{f_i}{\omega}}{i \in \mathbb{N}} > a} \notag
            });なので，
            \eqn(${
              \set-intentional{\omega \in \mathrm{\Omega}}{\sup \set-intentional{\app{f_i}{\omega}}{i \in \mathbb{N}} > a} 
                \supset \bigcup_{i \in \mathbb{N}} \set-intentional{\omega \in \mathrm{\Omega}}{\app{f_i}{\omega} > a} \notag
            });
            また，可測関数の${\openclosebracket{a, \infty}}の逆像は${\mathfrak{B}}に含まれるので，${\mathfrak{B}}は${\sigma}代数なので加算無限個の和についても閉じている．
            以上より
            \eqn(${
              \set-intentional{\omega \in \mathrm{\Omega}}{\sup \set-intentional{\app{f_i}{\omega}}{i \in \mathbb{N}} > a} 
                = \bigcup_{i \in \mathbb{N}} \set-intentional{\omega \in \mathrm{\Omega}}{\app{f_i}{\omega} > a}
              \in \mathfrak{B} \notag
            });
            ${\inf}も同様．
          
          * ${\limsup_{i \to \infty} \app{f_i}{\omega} = \inf_{j \geq 1} \sup_{i \geq j} \app{f_i}{\omega}}なので，
            (2)より， 
            \eqn(
              ${\inf_{j \geq 1} \sup_{i \geq j} \app{f_i}{\omega} \in \mathfrak{B} \notag}
            );
            同様に，
            \eqn(
              ${\liminf_{i \to \infty} \app{f_i}{\omega} = \sup_{j \geq 1} \inf_{i \geq j} \app{f_i}{\omega} \in \mathfrak{B} \notag}
            );

          * ${\lim_{i \to \infty} \app{f_i}{\omega} \in \mathbb{R}^{*} = \sup \set-intentional{\app{f_i}{\omega}}{i \in \mathbb{N}} = \inf \set-intentional{\app{f_i}{\omega}}{i \in \mathbb{N}}}なので，
            (2)より成り立つ．
        }
      >

      +lemma?*?:(`measurable-function-charactors-3`) {
        ${#measure-sp}を測度空間とする．定数関数${r}を
        \Diagram.new((70pt, 24pt));
        \Diagram.set-object((10pt, 13pt))(${r});
        \Diagram.set-object((15pt, 13pt))(${\colon-rel});
        \Diagram.set-object((20pt, 13pt))(${\mathrm{\Omega}});
        \Diagram.set-arrow((30pt, 11pt))((47pt, 11pt));
        \Diagram.set-object((50pt, 13pt))(${\mathbb{R}^{*}});
        \Diagram.set-object((21pt, 0pt))(${*});
        \Diagram.set-element-arrow((30pt, 0pt))((47pt, 0pt));
        \Diagram.set-object((51pt, 2pt))(${r});
        \Diagram.show-diagram(`measurable-function-charactors-3-1`);
        で与えると，これは可測関数になる．
      }
      +proof<
        +p{
          可測関数の定義から任意の${a \in \mathbb{R}^{*}}について，
          ${\openclosebracket{a, \infty}}の逆像が${\mathfrak{B}}に入っていればいいが，
          ${a \geq r}ではその逆像は${\emptyset \in \mathfrak{B}}, ${a < r}ではその逆像は${\mathrm{\Omega} \in \mathfrak{B}}なので示された．
        }
      >

      +theorem?*?:(`measurable-function-charactors-4`) {
        ${#measure-sp}を測度空間，
        ${f, g\colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}を可測関数とする．
        このとき，以下が成り立つ．
        \enumerate{
          * ${\set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} > \app{g}{\omega}} \in \mathfrak{B}}
          * ${\set-intentional{\omega \in \mathrm{\Omega}}{\app{f}{\omega} = \app{g}{\omega}} \in \mathfrak{B}}
        }
      }
      +proof<
        +enumerate{
          * ${f-g}が可測関数であることが確認できればよい．
            lem\ref(`lem:measurable-function-charactors-2`);より，可測関数同士の和と積について可測関数になり，
            lem\ref(`lem:measurable-function-charactors-3`);より，定数関数のは可測関数なので，
            ${f-g = f + (-1) * g}は可測関数．
          可測関数の定義から任意の${a \in \mathbb{R}^{*}}について，
          ${\openclosebracket{a, \infty}}の逆像が${\mathfrak{B}}に入っているので，
          特に${a=0}の時が求める結果である．
          * ${f-g}が可測関数なので，
            lem\ref(`lem:measurable-function-charactors`);(5)より，
            ${a=0}の時が求める結果となっている．
        }
      >
    >

    +section{単関数} <
      +definition?:({特性関数})?:(`charactoristic-function`) {
        特性関数${1_A \colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}を以下で与える．
        \eqn(${
          \app{1_A}{\omega} = \cases{
            | 1  | \omega \in A
            | 0  | \omega \nin A
          |} \notag
        });
      }
      +definition?:({単関数})?:(`simple-function`) {
        ${#measure-sp}を測度空間とする．

        ${f \colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}について，
        ${a_i \in \mathbb{R}, A_i \in \mathfrak{B} (i \in \brace{1, 2, \cdots, n})}が存在して，
        ${\app{f}{\omega} = \sum_{i=1}^n a_i \app{1_{A_i}}{\omega} }
        と書けるとき，${f}を\dfn{単関数}であるという．
      }
      +p{
        この定義の元で特性関数は単関数である．
      }

      +definition?:({単関数の積分})?:(`simple-function-integration`) {
        ${#measure-sp}を測度空間，${f \colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}を単関数とする．
        ${f}の${A \in \mathfrak{B}}での積分を
        \eqn(${
          \int_A f \ dm = \sum_{i=1}^{n} a_i \app{m}{A \cap A_i} \notag
        });で与える．
      }
      +p{
        ${f}の表し方は一意的ではないため，この積分のwell-definednessについて以下で確認していく．
      }

      +lemma?:({特性関数の積分の性質})?:(`characteristic-function-integration-charactors`) {
        ${O, A\in \mathfrak{B}}のとき，以下が成り立つ．
        \enumerate{
          * ${B,C \in \mathfrak{B}}で${A = B \cup C}，${B \cap C = \emptyset}ならば，${ \int_O 1_A \ dm = \int_O 1_B \ dm + \int_O 1_C \ dm}
          * ${b,c \in \mathbb{R}}ならば，${ \int_O \paren{b+c} \cdot 1_A \ dm = \int_O b \cdot 1_A \ dm + \int_O c \cdot 1_A  \ dm}
        }
      }
      +proof<
        +enumerate{
          * 
          \align(${
            | \int_O 1_A \ dm |= \app{m}{O \cap A} \label!(`characteristic-function-integration-charactors-1`)
            |                 |= \app{m}{\paren{O \cap B} \cup \paren{O \cap C}} \notag
            |                 |= \app{m}{\paren{O \cap B}} + \app{m}{\paren{O \cap C}} \label!(`characteristic-function-integration-charactors-2`)
            |                 |= \int_O 1_B \ dm + \int_O 1_C \ dm \label!(`characteristic-function-integration-charactors-3`)
          |});
          \ref-eq(`characteristic-function-integration-charactors-1`);，\ref-eq(`characteristic-function-integration-charactors-3`);は単関数の積分の定義から，
          \ref-eq(`characteristic-function-integration-charactors-2`);は測度の${\sigma}加法性から従う．

          * 
          \align(${
            | \int_O \paren{b+c} \cdot 1_A \ dm |= \paren{b+c}\app{m}{O \cap A} \notag
            |                                   |= b\app{m}{O \cap A} + c\app{m}{O \cap A}\notag
            |                                   |= \int_O b \cdot 1_A \ dm + \int_O c \cdot 1_A  \ dm \notag
          |});
          より示せた．
        }
      >
      +proposition?:({単関数の積分の一意性})?:(`uniqueness-for-simple-function-integraion`) {
        ${#measure-sp}を測度空間，
        ${f, g\colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}を${f=g}であるような単関数とする．
        任意の${O \in \mathfrak{B}}について，
        \eqn(${\int_O f \ dm = \int_O g \ dm \notag});
      }
      +proof<
        +p{
          \eqn(${\app{f}{\omega} = \sum_{i=1}^n a_i \app{1_{A_i}}{\omega} 
            \and-also \paren{a_i \in \mathbb{R}, A_i \in \mathfrak{B} (i \in \brace{1, 2, \cdots, n})}\notag});
          \eqn(${\app{g}{\omega} = \sum_{j=1}^m b_j \app{1_{B_j}}{\omega}
            \and-also \paren{b_j \in \mathbb{R}, B_j \in \mathfrak{B} (j \in \brace{1, 2, \cdots, m})}\notag});と置く．
          また，関数として同じだけでなく積分後も一致するという意味での等号を${\equal^{\text!{∫}}}で与え，積分を保つとよぶ．
        }
        +p{
          ${A_c := \mathrm{\Omega} - \bigcup_{i=1}^{n} A_i}について${a_c = 0}として${f'\colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}を
          \eqn(${\app{f'}{\omega} = \app{f}{\omega} + a_c \app{1_{A_c}}{\omega} \notag});
          で与えると，係数${0}の特性関数の積分は${0}なので，${f \equal^{\text!{∫}} f' }である．

          同様に
          ${B_c := \mathrm{\Omega} - \bigcup_{j=1}^{m} B_i}について${b_c = 0}として${g'\colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}を
          \eqn(${\app{g'}{\omega} = \app{g}{\omega} + b_c \app{1_{B_c}}{\omega} \notag});
          で与える．
        }

        +p{
          lem\ref(`lem:characteristic-function-integration-charactors`);より，
          単関数を互いに素な集合に分解する操作は積分を保つ．
          単関数は有限個の集合に対して定義されるので，
          どの集合も互いに素になるように分解することで得られる集合は高々${2^n}個である．
          よって，この操作で得られるのはまた単関数であり，操作については積分を保つ．
          単関数の互いに素な集合を合併する操作は積分を保つので，
          高々${2^n}種類の係数の中で 同じ値の係数である集合の合併を取る操作で得られるのは単関数，操作については積分を保つ．
          以上より，${f', g'}について，集合を互いに素に分割し，同じ係数で合併を取る操作をした単関数${f'', g''}を
          \eqn(${\app{f''}{\omega} = \sum_{i=1}^{n'} a''_i \app{1_{A''_i}}{\omega} 
            \and-also \paren{a''_i \in \mathbb{R}, A''_i \in \mathfrak{B} (i \in \brace{1, 2, \cdots, n'}), \bigcup_{i=1}^{n'} A''_i = \mathrm{\Omega}}\notag});
          \eqn(${\app{g''}{\omega} = \sum_{j=1}^{m'} b''_j \app{1_{B''_j}}{\omega}
            \and-also \paren{b''_j \in \mathbb{R}, B''_j \in \mathfrak{B} (j \in \brace{1, 2, \cdots, m'}), \bigcup_{j=1}^{m'} B''_j = \mathrm{\Omega}}\notag});
          とおき，
          ${f \equal^{\text!{∫}} f' \equal^{\text!{∫}} f''}，${g \equal^{\text!{∫}} g' \equal^{\text!{∫}} g''}となる．
        }

        +p{
          \Diagram.new((200pt, 100pt));

          \Diagram.set-object((35pt, 77pt))(${f});
          \Diagram.set-object((65pt, 85pt))(${\text!{∫}});
          \Diagram.set-dupline((50pt, 80pt))((80pt, 80pt));
          \Diagram.set-object((90pt, 77pt))(${f'});
          \Diagram.set-object((120pt, 85pt))(${\text!{∫}});
          \Diagram.set-dupline((105pt, 80pt))((135pt, 80pt));
          \Diagram.set-object((145pt, 77pt))(${f''});

          \Diagram.set-object((35pt, 27pt))(${g});
          \Diagram.set-object((65pt, 35pt))(${\text!{∫}});
          \Diagram.set-dupline((50pt, 30pt))((80pt, 30pt));
          \Diagram.set-object((90pt, 27pt))(${g'});
          \Diagram.set-object((120pt, 35pt))(${\text!{∫}});
          \Diagram.set-dupline((105pt, 30pt))((135pt, 30pt));
          \Diagram.set-object((145pt, 27pt))(${g''});

          \Diagram.set-dupline((38pt, 67pt))((38pt, 37pt));
          \Diagram.show-diagram(`uniqueness-for-simple-function-integraion-1`);
        }

        +p{
          ${\omega \in \mathrm{\Omega}}について，${\app{f''}{\omega} = \app{g''}{\omega}}より，
          任意の${a \in \mathbb{R} ^ {*}}について，
          \eqn(
            ${\set-intentional{\omega \in \mathrm{\Omega}}{\app{f''}{\omega} = a} = \set-intentional{\omega \in \mathrm{\Omega}}{\app{g''}{\omega} = a} \notag}
          );
          特性関数に使われる集合は互いに素でその合併は全体集合かつ，その数は有限なので，
          ${f'', g''}の各項の係数が一致することとその項の特性関数に使われる集合が等しいことは同値である．
          よって，${n' = m'}であり，インデックスを適切に取り替えることで，
          ${a''_i = b''_i, A''_i = B''_i}になるのでその積分値も等しく，${f'' \equal^{\text!{∫}} g''}．
        }

        +p{
          \Diagram.new((200pt, 100pt));

          \Diagram.set-object((35pt, 77pt))(${f});
          \Diagram.set-object((65pt, 85pt))(${\text!{∫}});
          \Diagram.set-dupline((50pt, 80pt))((80pt, 80pt));
          \Diagram.set-object((90pt, 77pt))(${f'});
          \Diagram.set-object((120pt, 85pt))(${\text!{∫}});
          \Diagram.set-dupline((105pt, 80pt))((135pt, 80pt));
          \Diagram.set-object((145pt, 77pt))(${f''});

          \Diagram.set-object((35pt, 27pt))(${g});
          \Diagram.set-object((65pt, 35pt))(${\text!{∫}});
          \Diagram.set-dupline((50pt, 30pt))((80pt, 30pt));
          \Diagram.set-object((90pt, 27pt))(${g'});
          \Diagram.set-object((120pt, 35pt))(${\text!{∫}});
          \Diagram.set-dupline((105pt, 30pt))((135pt, 30pt));
          \Diagram.set-object((145pt, 27pt))(${g''});

          \Diagram.set-dupline((38pt, 67pt))((38pt, 37pt));
          \Diagram.set-dupline((148pt, 67pt))((148pt, 37pt));
          \Diagram.set-object((154pt, 50pt))(${\text!{∫}});
          \Diagram.show-diagram(`uniqueness-for-simple-function-integraion-2`);
        }
        +p{
          以上より，元の${f, g} についても積分値が一致し，
          ${f \equal^{\text!{∫}} g}．
        }
      >

      +corollary?*?*{
        単関数の特性関数を用いた表示では係数はすべて異なり，
        また，特性関数に用いている集合は互いに素かつ全ての和集合は全体集合と思って良い．
        加えて，単関数は可測関数（特性関数の証明と同様）．
      }
      
      +lemma?*?:(`simple-function-charactors`){
        ${#measure-sp}を測度空間，
        ${f, g\colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}を非負値単関数，
        ${A, B \in \mathfrak{B}}とするとき，以下が成り立つ．
        \enumerate{
          * ${A \cap B = \emptyset \Rightarrow \int_{A \cup B} f \ dm = \int_{A} f \ dm + \int_{B} f \ dm }
          * ${A \subset B \Rightarrow \int_{A} f \ dm \leq \int_{B} f \ dm }
          * ${\int_{A} \paren{f+g} \ dm = \int_{A} f \ dm + \int_{A} g \ dm }
          * ${\forall \omega \in A, \app{f}{\omega} \leq \app{g}{\omega} \Rightarrow \int_{A} f \ dm \leq \int_{A} g \ dm }
        }
      }
      +proof<
        +p{
          \eqn(${\app{f}{\omega} = \sum_{i=1}^n a_i \app{1_{A_i}}{\omega} 
            \and-also \paren{a_i \in \mathbb{R}, A_i \in \mathfrak{B} (i \in \brace{1, 2, \cdots, p})}\notag});
          \eqn(${\app{g}{\omega} = \sum_{j=1}^m b_j \app{1_{B_j}}{\omega}
            \and-also \paren{b_j \in \mathbb{R}, B_j \in \mathfrak{B} (j \in \brace{1, 2, \cdots, q})}\notag});と置く．
        }
        
        +enumerate{
          * 積分の定義より，
            \align(${
              | \int_{A\cup B} f \ dm |= \sum_{i=1}^{p} a_i \app{m}{\paren{A\cup B} \cap A_i} \notag
              |                       |= \sum_{i=1}^{p} a_i \app{m}{\paren{A\cap A_i} \cup \paren{B\cap A_i} } \notag
              |                       |= \sum_{i=1}^{p} a_i \paren{\app{m}{A\cap A_i} + \app{m}{B\cap A_i}} \text!{（∵σ加法性）}\notag
              |                       |= \sum_{i=1}^{p} a_i \app{m}{A\cap A_i} + \sum_{i=1}^{p} a_i \app{m}{B\cap A_i} \notag
              |                       |= \int_{A} f \ dm + \int_{B} f \ dm\notag
            |});
          * 積分の定義より，
            \align(${
              | \int_{B} f \ dm |= \sum_{i=1}^{p} a_i \app{m}{B \cap A_i} \notag
              |                 |= \sum_{i=1}^{p} a_i \app{m}{\paren{A \cap A_i} \cup \paren{\paren{B-A} \cap A_i}} \notag
              |                 |= \sum_{i=1}^{p} a_i \paren{\app{m}{A \cap A_i} + \app{m}{\paren{B-A} \cap A_i}} \text!{（∵σ加法性）} \notag
              |                 |\geq \sum_{i=1}^{p} a_i \app{m}{A \cap A_i} \text!{（∵測度，単関数の非負性）} \notag
              |                 |= \int_{A} f \ dm\notag
            |});
          * 積分の定義より，
            \align(${
              | \int_{A} \paren{f+g} \ dm |= \sum_{i=1}^{p} a_i \app{m}{A \cap A_i} + \sum_{i=1}^{q} b_j \app{m}{A \cap B_j}\notag
              |                           |= \int_{A} f \ dm + \int_{A} g \ dm\notag
            |});
          * 
            \align(${
              | \int_{A} f \ dm |= \sum_{i=1}^{p} a_i \app{m}{A \cap A_i}\notag
              |                 |= \sum_{i=1}^{p} \sum_{j=1}^{q} a_i \app{m}{A \cap \paren{A_i \cap B_j}}\notag
              |                 |\leq \sum_{i=1}^{p} \sum_{j=1}^{q} b_j \app{m}{A \cap \paren{A_i \cap B_j}} \notag
              |                 |\and-also \paren{\text!{∵各${A_i \cap B_j}上で${\app{m}{A_i \cap B_j} \neq 0 \Rightarrow \app{f}{\omega} \leq \app{g}{\omega}}}} \notag 
              |                 |= \sum_{j=1}^{q} b_j \app{m}{A \cap B_j}\notag
              |                 |= \int_{A} g \ dm \notag
            |});
        }
      >
    +section{ルベーグ積分の定義} <
      +p{
        ${#measure-sp}を測度空間，
        ${f\colon-rel \mathrm{\Omega} \to \mathbb{R}^{+}}を非負値可測関数とする．
        ${f_i\colon-rel \mathrm{\Omega} \to \mathbb{R}^{+} \paren{i \in \mathbb{N_{>0}}}}を
        \eqn(${
          \app{f_i}{\omega} = \Math-sub.cases{
            | \frac{k}{2^i} | \app{f}{\omega} \in \closeclosebracket{\frac{k}{2^i}, \frac{k+1}{2^i}}
            | 2^i           | \app{f}{\omega} \geq 2^i
          |}\notag
        });
        と置くと，これは可測関数になる．
        
        この関数は
        \eqn(${
          \forall \omega \in \mathrm{\Omega}, \math-skip!(1pt) \app{f_i}{\omega} \to \app{f}{\omega} \math-skip!(3pt) \paren{i \to \infty} \notag
        });
        を満たすので，以下の定義を得る．
      }
      +definition?:({可測関数の積分(1)})?:(`measurable-integration-1`) {
        上の${f, f_i}の元で，${A \in \mathfrak{B}}上での積分${\int_A f \  dm}を，
        \eqn(${
          \int_A f \  dm = \lim_{i \to \infty} \int_A f_i \ dm
        });
        で与える．（以後のためにこの積分を\dfn{単関数の極限による積分}と呼ぶ．）
      }
      +p{
        以上の定義のメリットは具体的な計算ができることにあるが，
        デメリットとして定数倍を外に出す操作など，基本的な操作を確認するのに手間取ることになる．
        それを容易に行えるのが以下の定義である．
      }

      +definition?:({可測関数の積分(2)})?:(`measurable-integration-2`) {
        ${#measure-sp}を測度空間，
        ${f\colon-rel \mathrm{\Omega} \to \mathbb{R}^{+}}を非負値可測関数とする．

        ${A \in \mathfrak{B}}上での積分${\int_A f \  dm}を，
        \eqn(${
          \int_A f \  dm = \sup_{g\colon-rel \text!{単関数}, 0 \leq \app{g}{\omega} \leq \app{f}{\omega}} \int_A g \ dm
        });
        で与える．（以後のためにこの積分を\dfn{supによる積分}と呼ぶ．）
      }

      +p{
        この定義のメリットは，supの性質から，極限へどのような近づけ方をしても一致し，関数同士の和や関数の定数倍が積分の外でも一致することを要請する．
        ${F}を非負値可測関数の集合として和について図式で描くと，
          \Diagram.new((130pt, 100pt));

          \Diagram.set-object((25pt, 82pt))(${\paren{F, F}});
          \Diagram.set-object((66pt, 90pt))(${\text!{+}_F});
          \Diagram.set-arrow((62pt, 80pt))((82pt, 80pt));
          \Diagram.set-object((90pt, 82pt))(${F});

          \Diagram.set-arrow((38pt, 71pt))((38pt, 40pt));
          \Diagram.set-object((15pt, 58pt))(${\text!{∫} \times \text!{∫}});
          \Diagram.set-object((64pt, 58pt))(${\circlearrowright});
          \Diagram.set-arrow((94pt, 71pt))((94pt, 40pt));
          \Diagram.set-object((100pt, 58pt))(${\text!{∫}});

          \Diagram.set-object((21pt, 32pt))(${\paren{\mathbb{R}^{+}, \mathbb{R}^{+}}});
          \Diagram.set-object((65pt, 40pt))(${\text!{+}_{R^{+}}});
          \Diagram.set-arrow((62pt, 30pt))((82pt, 30pt));
          \Diagram.set-object((90pt, 32pt))(${\mathbb{R}^{+}});

          \Diagram.show-diagram(`commutative-integration-of-sum`);
        で，かっこいい．
      }

      +p{
        結果としてこの２つの積分の定義は一致するため，具体的な計算や形式的な演算を容易にできる．
        それを次の節で示していく．
      }

      +p{
        さて，一般に可測関数が非負値に限らないとき，
        \eqn(${
          \app{f^+}{\omega} = \app{\max}{\app{f}{\omega}, 0} \notag
        });
        \eqn(${
          \app{f^-}{\omega} = \app{\max}{-\app{f}{\omega}, 0} \notag
        });
        で与えると，
        \eqn(${
          f = f^+ - f^- \notag
        });
        であるような，非負値可測関数${f^+, f^-}に分解できる．
        このそれぞれに対して積分することで可測関数${f}を求めることができる．
        ただし，${\infty - \infty}は不定なので，${\int f^+ \ dm < \infty}かつ${\int f^- \ dm < \infty}でない場合に限り, 積分を定義する．
        この条件を満たす可測関数${f}を\dfn{可積分である}とよぶ．
      }

      +p{
        積分の際，積分領域が指定されていない場合，${\mathrm{\Omega}}上での積分をするものとする．
      }
    >
    +subsection{エゴロフの定理} <
      +theorem?:({エゴロフの定理})?:(`egorovs-theorem`){
        ${#measure-sp}を測度空間，
        ${\app{m}{\mathrm{\Omega}} < \infty}とする．
        ${f_i\colon-rel \mathrm{\Omega} \to \mathbb{R}^+ \math-skip!(4pt)\paren{i \in \mathbb{N_{>0}}}}であるような
        非負値可測関数列${\family-array{f_i}_{i \in \mathbb{N_{>0}}}}が可測関数${f}に測度0を除いて収束しているとき，
        任意の ${\epsilon > 0} に対して，ある可測集合 ${H \in \mathfrak{B}} が存在して，
        \enumerate{
          * ${\app{m}{H} < \epsilon}
          * ${H^\complement }で${\family-array{f_i}_{i \in \mathbb{N_{>0}}}}は${f}に一様収束する
        }
      }
      +proof<
        +p{
          \eqn(${
          \app{A}{r, i} \coloneq 
            \bigcap_{k=i}^{\infty} 
              \set-intentional{\omega \in \mathrm{\Omega}}{\abs{\app{f}{\omega} - \app{f_k}{\omega}} < \frac{1}{2^{i}}}
              \math-skip!(4pt)
              \paren{r \in \mathbb{N_{>0}}, i \in \mathbb{N_{>0}}}
              \notag
          });
          とおく．
          ${\abs{\app{f}{\omega} - \app{f_k}{\omega}}}が可測関数なので，その${\closeopenbracket{-\infty, \ \frac{1}{2^i}}}に対する逆像は可測，
          その加算無限個の積集合も可測集合なので，この${\app{A}{r, i}}は可測集合である．
        }
        +p{
          ${\lim_{i \to \infty} f_i = f}を${\epsilon\text!{-}\delta}論法で書くと，
          \eqn(${
            \forall \omega \in \mathrm{\Omega}, \forall \epsilon > 0, \exists N \in \mathbb{N_{>0}},
             \forall n \geq N, \abs{\app{f}{\omega} - \app{f_n}{\omega}} < \epsilon
             \notag
          });
          なので，どの${\omega \in \mathrm{\Omega}}についても，ある${N_\omega}以上の${n}で
          ${\abs{\app{f}{\omega} - \app{f_n}{\omega}}  < \frac{1}{2^{i}}}であるような
          ものがとれる．
          よって，
          \eqn(${
            \lim_{i \to \infty} \app{A}{r, i} = \mathrm{\Omega} \notag
          });
        }
        +p{
          ${\family-array{\app{A}{r, i}}_{i \in \mathbb{N_{>0}}}}は${\app{A}{r, i}}の定義から単調増加なので，
          \eqn(${
            \app{A}{r, 1} \subset \app{A}{r, 2} \subset \cdots \notag
          });
          \eqn(${
            \bigcup_{i=1}^{\infty} \app{A}{r, i} = \mathrm{\Omega} \notag
          });
          なので，thm\ref(`thm:measurable-set-properties`);より，
          \eqn(${
            \lim_{i \to \infty} \app{m}{\app{A}{r, i}} = \app{m}{\bigcup_{i=1}^{\infty} \app{A}{r, i}} = \app{m}{\mathrm{\Omega}} \notag
          });
        }
        +p{
          それぞれの${r \in \mathbb{N}_{> 0}}について，${\lim}の定義から，ある${n_r}以降の${n}について，
          \eqn(${
            \app{m}{\app{A}{r, n}} \geq \app{m}{\mathrm{\Omega}} - \frac{1}{2^r} \notag
          });
          ${H_R \coloneq \bigcup_{r \geq R, r \in \mathbb{N}_{>0}} \app{A}{r, n}^\complement}とおくと，
          \align(${
            | \app{m}{H_R}    |= \app{m}{\bigcup_{r \geq R, r \in \mathbb{N}_{>0}} \app{A}{r, n}^\complement} \notag
            |                 |= \sum_{r \geq R, r \in \mathbb{N}_{>0}} \app{m}{\app{A}{r, n}^\complement} \math-skip!(2pt) \paren{\text!{∵ ${\sigma} 加法性，集合に重複がない場合は等号}} \notag
            |                 |= \sum_{r \geq R, r \in \mathbb{N}_{>0}} \app{m}{\mathrm{\Omega}} - \app{m}{\app{A}{r, n}} \notag
            |                 |\geq \sum_{r \geq R, r \in \mathbb{N}_{>0}} \frac{1}{2^r} \notag
            |                 |= \frac{1}{2^{R-1}} \notag
          |});
        }
        +p{
          ${\omega \in H_R^{\complement} = \bigcap_{r \geq R, r \in \mathbb{N}_{>0}} \app{A}{r, n}}では，
          \eqn(${
            \forall r \geq R, \forall n \geq n_r, \abs{\app{f}{\omega} - \app{f_n}{\omega}} < \frac{1}{2^r} \notag
          });
        }
        +p{
          主張に戻ると，
          ${\epsilon}に対しては，${\frac{1}{2^R} < \epsilon}を満たすように${R}をとればいい．
          このときの${R}について，${H_R^\complement}上で一様収束することが確認できればいいが，
          一様収束の定義は，
          \eqn(${
            \lim_{n \to \infty} \sup_{\omega \in S} \abs{\app{f}{\omega} - \app{f_n}{\omega}} = 0 \notag
          });
          なので，
          任意の${\delta > 0}に対して，${\frac{1}{2^r} < \min \paren{\delta,\  \frac{1}{2^R}}}
          であるような${r}をとってこれば，${n_r \leq n}で，
          \eqn(${
            \sup_{\omega \in H_R^\complement} \abs{\app{f}{\omega} - \app{f_n}{\omega}} \leq \frac{1}{2^r} < \delta \notag
          });
          より示せた．
        }
      >
    >
    +theorem?*?:(`integral-equation`){
      ${#measure-sp}を測度空間，
      ${O \in \mathfrak{B}}とする．
      ${f_i\colon-rel \mathrm{\Omega} \to \mathbb{R}^+ \math-skip!(4pt)\paren{i \in \mathbb{N_{>0}}}}であるような
      非負値可測関数列${\family-array{f_i}_{i \in \mathbb{N_{>0}}}}が可測関数${f}に測度0を除いて収束（概収束という）しているとき，
      \eqn(${
        \int_O f \ dm = \lim_{n \to \infty} \int_O f_n \ dm \notag
      });
      （等号の左側の積分はsupによる積分，右側の積分は単関数の極限による積分）
    }
    +proof<
      +p{
        ${\app{m}{O} < \infty}のとき
      }
      +p{
        適当な${f}に収束する非負値単関数増加列${f_i}を取ってくる．
        （これは単関数の極限に用いる単関数列も含む）
        このとき，thm\ref(`thm:egorovs-theorem`);より，
        \eqn(${
          \forall \epsilon > 0, \exists H \in \mathfrak{B}, 
            \paren{
              \app{m}{H}
              \land \lim_{n \to \infty} \sup_{\omega \in H^\complement} \abs{\app{f}{\omega} - \app{f_n}{\omega}} = 0
            } \notag
        });
        特に後者の主張より，
        \eqn(${
          \forall \delta > 0, \exists N \in \mathbb{N}, \forall n \geq N,
            \forall \omega \in H^\complement, \abs{\app{f}{\omega} - \app{f_n}{\omega}} < \delta
            \notag
        });
        なので，任意の単関数${g\colon-rel \mathrm{\Omega} \to \mathbb{R}^+ \; \ \forall \omega \in O, \app{g}{\omega} \geq \app{f}{\omega}}
        について，上の${\delta, N}について，${N \leq n}で
        \align(${
          | \app{f_n}{\omega} - \app{g}{\omega} |= \paren{\app{f_n}{\omega} - \app{f}{\omega}} + \paren{\app{f}{\omega}- \app{g}{\omega}}  \notag
          |                                     |\geq - \delta  \notag
        |});
        より，
        \align(${
          | \int_O g \ dm |= \int_{O\cap H} g \ dm + \int_{O\cap H^\complement} g \ dm \notag
          |               |\leq \max_{\omega \in O\cap H} \app{g}{\omega} \cdot \app{m}{O\cap H}
                                  + \int_{O\cap H^\complement} \paren{f_n + \delta} \ dm \notag
          |               |\leq \max_{\omega \in O\cap H} \app{g}{\omega} \cdot \epsilon
                                  + \delta \cdot \app{m}{H^\complement} + \int_{O} f_n  \ dm \notag
        |});
      }
      +p{
        この${n}に関する極限は，
        \align(${
          |\int_O g \ dm  |\leq \max_{\omega \in O\cap H} \app{g}{\omega} \cdot \epsilon
                                  + \delta \cdot \app{m}{H^\complement} 
                                  + \lim_{n \to \infty} \int_{O} f_n  \ dm \notag
        |});
        ${\epsilon, \delta}は任意にとれたので，不等式
        \align(${
          |\int_O g \ dm  |\leq \lim_{n \to \infty} \int_{O} f_n  \ dm \notag
        |});
        を得る．
      }
      +p{
        よって，${\lim_{n \to \infty} \int_{O} f_n  \ dm}は${f}以下の任意の${g}についての積分の上界になっているので，supによる積分の定義から，
        \align(${
          |\int_O f \ dm  |\leq \lim_{n \to \infty} \int_{O} f_n  \ dm \notag
        |});
      }
      +p{
        一方，
        ${f_i\colon-rel \mathrm{\Omega} \to \mathbb{R}^+ \math-skip!(4pt)\paren{i \in \mathbb{N_{>0}}}}
        は単調増加列なので，
        ${\int_O f_n \ dm \leq \int_O f \ dm}
        より，その${n}に関する極限は，
        ${\lim_{n \to \infty} \int_O f_n \ dm \leq \int_O f \ dm}
      }
      +p{
        以上から，2つの不等式を合わせて，
        ${\lim_{n \to \infty} \int_O f_n \ dm = \int_O f \ dm}
      }

      +p{
        ${\app{m}{O} = \infty}のとき，
        ${f}以下の任意の単関数${g}をとってきて，${g = \sum_{i=1}^{n} a_i 1_{A_i}}とおく．
        \listing{
          * ${\int_O g \ dm = \infty}のとき
          * ${\int_O g \ dm < \infty}のとき
        }
        で場合分けが必要である．
      }
      +p{
         ${\int_O g \ dm = \infty}のとき
      }
        +p{
          ${g}は有限係数の特性関数の有限個の項の和なので，少なくとも一つ以上のindex で，
          ${\app{m}{A_{i}} = \infty}．
          そのうち一つを ${i_0}とおく．
          ${\app{g}{\omega} \leq \app{f}{\omega} = \lim_{n \to \infty} \app{f_n}{\omega}}より，
          \eqn(${
            B_n \coloneq \set-intentional{\omega \in A_{i_0} \cap O}{\app{f_n}{\omega} \leq \frac{a_{i_0}}{2} } \notag
          });
          とおくと，${B_n \in \mathfrak{B}}で，かつ，
          ${f_n}が単調増加なので，${\family-array{B_n}}は単調増加かつ
          ${\bigcup_{n=1}^{\infty} B_n = A_{i_0} \cap O}．
          よって，thm\ref(`thm:measurable-set-properties`);より，
          \eqn(${
            \lim_{n \to \infty} \app{m}{B_n} = \app{m}{A_{i_0} \cap O} = \infty \notag
          });．
        }
        +p{
          一方，${B_n \in \omega}について，${\app{f_n}{\omega} \geq \frac{a_i}{2} }なので，
          \eqn(${
            \int_O f_n \ dm \geq \frac{a_{i_0}}{2} \app{m}{B_n} \notag
          });
          より，${n}に関する極限は，
          \eqn(${
            \lim_{n \to \infty} \int_O f_n \ dm \geq \lim_{n \to \infty} \frac{a_{i_0}}{2} \app{m}{B_n} = \infty \notag
          });
          なので，
          \eqn(${
             \lim_{n \to \infty} \int_O f_n \ dm = \int_O f \ dm = \sup_{g\colon-rel \text!{単関数}, 0 \leq \app{g}{\omega} \leq \app{f}{\omega}} \int_O g \ dm \notag
          });
        }
      +p{
        ${\int_O g \ dm < \infty}のとき
      }
      +p{
        ${O' \coloneq \bigcup_{i = 1}^{n} \paren{A_i \cap O}}とおくと，
        ${\app{m}{O'} < \infty}でなければならない．
        この${O'}上での積分を考えると，
        \align(${
           | \lim_{n \to \infty} \int_O f_n \ dm |\geq \lim_{n \to \infty} f_n \ dm \notag
           |                                     |= \int_{O'} f \ dm\math-skip!(4pt) \text!{（∵${\app{m}{O} < \infty}のときの議論）} \notag
           |                                     |\geq \int_{O'} g \ dm \notag
           |                                     |= \int_{O} g \ dm \notag
        |});
        ${g}に関するsupを取ると，
        \eqn(${
           \lim_{n \to \infty} \int_O f_n \ dm \geq \int_{O} f \ dm \notag
        });
        を得る．
        一般に
        ${\int_O f_n \ dm \leq \int_O f \ dm}
        なので，
        ${\lim_{n \to \infty} \int_O f_n \ dm \leq \int_O f \ dm}
        より，　
        \eqn(${
          \lim_{n \to \infty} \int_O f_n \ dm = \int_O f \ dm \notag
        });
      }
    >
    +section{収束定理} <
      +p{
        ここまでやってくると，積分と${\lim}を交換したくなるので交換します．
      }
      +subsection{準備} <
        +lemma?*?:(`monotone-convergence-theorem`) {
          ${#measure-sp}を測度空間とする．
          \enumerate{
            * ${f_i\colon-rel \mathrm{\Omega} \to \mathbb{R}^{+}}であるような非負値可測関数列${\family-array{f_i}_{i=1}^{\infty}}に対して，
              \eqn(${
                \app{f}{\omega} \coloneq \sum_{i=1}^{\infty} \app{f_i}{\omega} \notag
              });
              とおく．このとき，
              \eqn(${
                \int f \ dm = \sum_{i=1}^{\infty} \int f_i \ dm \notag
              });
              が，左辺が発散すれば右辺も発散するという意味で成り立つ．
            *  (単調収束定理）
              ${f_i\colon-rel \mathrm{\Omega} \to \mathbb{R}^{+}}であるような非負値可測関数列${\family-array{f_i}_{i=1}^{\infty}}について，
              \eqn(${
                \forall \omega \in \mathrm{\Omega}, 0 \leq \app{f_1}{\omega} \leq \app{f_2}{\omega} \leq \cdots \to \app{f}{\omega} \notag
              });
              を満たすとする．
              このとき，
              \eqn(${
                \lim_{i \to \infty} \int f_i \ dm = \int f \ dm \notag
              });
              が，左辺が発散すれば右辺も発散するという意味で成り立つ．
          }
        }
        +proof<
          +p{
          (1) ${f_i}に収束する非負単関数の単調増加列${\family-array{f_{i,j}}_{j=1}^{\infty}}に対して，
            \eqn(${
              g_j \coloneq \sum_{i=1}^{j} f_{i,j} \notag
            });
            とおく．
            （${f_i}に収束する単関数は，単関数の極限による積分のときに定義した単関数の族が一つの例だが，ここでは任意に取って良いことに注意．）
            このとき，
            \eqn(${
              g_{j+1} - g_j = \sum_{i=1}^{j} \paren{f_{i,j+1} - f_{i,j}} + f_{j+1, j+1} \notag 
            });
            で，${f_{i,j+1} - f_{i,j}}は単調増加な単関数を取ってきているので非負，${f_{j+1, j+1}}は非負値であることから，
            ${g_{i,j}}は単調増加である．
            \eqn(${
              \forall j \in \mathbb{N}, f = \sum_{i=1}^{\infty} f_i 
                \geq \sum_{i=1}^{j} f_i 
                \geq \sum_{i=1}^{j} f_{i,j} 
                = g_j \label!(`monotone-convergence-theorem-1`)
            });
            また，${\forall k \in \mathbb{N}}について，
            \eqn(${
              \lim_{j \to \infty} g_j = \lim_{j \to \infty} \sum_{i=1}^{j} f_{i,j}
                                      \geq \lim_{j \to \infty} \sum_{i=1}^{k} f_{i,j}
                                      = \sum_{i=1}^{k} \lim_{j \to \infty} f_{i,j}
                                      = \sum_{i=1}^{k} f_i \notag
            });
            なので，${k \to \infty}のとき，
            \eqn(${
              \lim_{j \to \infty} g_j \geq f \label!(`monotone-convergence-theorem-2`)
            });
            となる．
            よって，\ref-eq(`monotone-convergence-theorem-1`);，\ref-eq(`monotone-convergence-theorem-2`);より，
            \eqn(${
              \lim_{j \to \infty} g_j = f 
            });
            lem \ref(`lem:measurable-function-charactors-2`);より${f}は可測となる．
            thm \ref(`thm:integral-equation`);より，${f}に収束する単関数列の極限は積分後も一致するので，
            \eqn(${
              \int f \ dm = \lim_{j \to \infty} \int g_j \ dm \notag
            });
            \AZMathEquation.align(${
              |\int f \ dm  |= \lim_{j \to \infty} \int g_j \ dm \notag
              |             |= \lim_{j \to \infty} \int \paren{\sum_{i=1}^{j} f_{i,j}}  \ dm \notag
              |             |= \lim_{j \to \infty} \sum_{i=1}^{j} \int  f_{i,j}  \ dm \text!{（∵lem\ref(`lem:simple-function-charactors`);(3)）}\notag
              |             |\leq \lim_{j \to \infty} \sum_{i=1}^{j} \int  f_i  \ dm \notag
              |             |= \sum_{i=1}^{\infty} \int f_i \ dm \label!(`monotone-convergence-theorem-3`)
            |});
            一方，
            \eqn(${
              \forall j \in \mathbb{N}, f = \sum_{i=1}^{\infty} f_i \notag
            });
            なので，
            \eqn(${
              \int f \ dm \geq \int \paren{\sum_{i=1}^j f_i} \ dm 
                          = \sum_{i=1}^j \int f_i \ dm \text!{（∵lem\ref(`lem:simple-function-charactors`);(3)）} \notag
            });
            より，\eqn(${
              \int f \ dm \geq \sum_{i=1}^\infty \int f_i \ dm \label!(`monotone-convergence-theorem-4`)
            });
            以上より，\ref-eq(`monotone-convergence-theorem-3`);，\ref-eq(`monotone-convergence-theorem-4`);なので，
            \eqn(${
              \int f \ dm = \sum_{i=1}^\infty \int f_i \ dm \notag
            });
          }
          +p{
            (2) ${f'_1 \coloneq f_1}，${f'_{k+1} \coloneq f_{k+1} - f_k }とおくと，
            ${\family-array{f'_i}_{i=1}^{\infty}}は非負値関数列になる．
            この${\family-array{f'_i}_{i=1}^{\infty}}について，
            ${f = \sum_{i=1}^{\infty} f'_i}とおくと，(1)より，
            \eqn(${
              \int f \ dm = \sum_{i=1}^{\infty} \int f'_i \ dm
            });
            だが，
            ${f_i = \sum_{k=1}^{i} f'_k}なので，
            \AZMathEquation.align(${
              |\lim_{i \to \infty} \int f_i \ dm |= \lim_{i \to \infty} \int \paren{\sum_{k=1}^i f'_k} \ dm \notag
              |                                  |= \lim_{i \to \infty} \sum_{k=1}^i \int f'_k \ dm\text!{（∵lem\ref(`lem:simple-function-charactors`);(3)）} \notag
              |                                  |= \sum_{k=1}^{\infty} \int f'_k \ dm \notag
              |                                  |=  \int f \ dm \notag
            |});
          }
        >
        +lemma?:({ファトゥの補題})?:(`Fatous-lemma`){
          ${f_i\colon-rel \mathrm{\Omega} \to \mathbb{R}^{+}}であるような非負値可測関数列${\family-array{f_i}_{i=1}^{\infty}}について，
          \eqn(${
            \int \liminf_{i \to \infty} f_i \ dm \leq \liminf_{i \to \infty} \int f_i \ dm \notag
          });
        }
        +proof<
          +p{
            \eqn(${
              \app{g_i}{\omega} \coloneq \inf \set-intentional{\app{f_n}{\omega}}{n \geq i} \notag
            });
            とおく．
            ${\forall i \in \mathbb{B}, \app{f_i}{\omega} \geq 0}より，${\app{g_i}{\omega} \geq 0}．
            また，
            \eqn(${
              \app{g_i}{\omega} \leq \app{g_{i+1}}{\omega} \text!{（∵${\inf}のdef）} \notag
            });
            lem \ref(`lem:monotone-convergence-theorem`);(2)より，
            \eqn(${
              \lim_{i \to \infty} \int g_i \ dm = \int \lim_{i \to \infty} g_i \ dm \notag
            });
          }
          +p{
            右辺から，
            \eqn(${
              \int \lim_{i \to \infty} g_i \ dm = \int \lim_{i \to \infty} \inf_{i \leq k} f_k \ dm  
                                                = \int \liminf_{i \to \infty} f_i \ dm \notag
            });
          }
          +p{
            左辺から，
            \eqn(${
              \lim_{i \to \infty} \int g_i \ dm = \liminf_{i \to \infty} \int g_i \ dm \leq \liminf_{i \to \infty} \int f_i \ dm \notag
            });
          }
          +p{
            よって，
            \eqn(${
              \int \liminf_{i \to \infty} f_i \ dm \leq \liminf_{i \to \infty} \int f_i \ dm \notag
            });
            を得る．
          }
        >
        +definition?:({概収束，測度収束})?:(`approximate-convergence`){
          ${#measure-sp}を測度空間，
          ${f\colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}を可測関数，
          ${f_i\colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}であるような可測関数列${\family-array{f_i}_{i=1}^{\infty}}とする．
          \enumerate{
            * \eqn(${
              \app{m}{\set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \app{f_i}{\omega} \neq \app{f}{\omega}}} = 0 \notag
            });
            を満たすとき，${\family-array{f_i}_{i=1}^{\infty}}は${f}に概収束する，またはほとんどいたるところ（almost everywhere）で収束するといい，
            ${f_i \to f \ a.e.} と表す．
            * \eqn(${
              \forall \epsilon > 0, \lim_{i \to \infty} \app{m}{\set-intentional{\omega \in \mathrm{\Omega}}{\abs{\app{f_i}{\omega} - \app{f}{\omega}} > \epsilon}} = 0 \notag
            });
            を満たすとき，${\family-array{f_i}_{i=1}^{\infty}}は${f}に測度収束するという．
          }
        }
        +p{
          (1)で測る集合は必ずしも可測とは限らないので，概収束するかは収束するかを確認しないといけない．
          一方，(2)では必ず可測になるので(1)に比べ簡単に条件を満たすかを確認できる．
        }
        +definition?*?*{
          ${#measure-sp}を測度空間，
          ${f_i\colon-rel \mathrm{\Omega} \to \mathbb{R}^{*}}であるような可測関数列${\family-array{f_i}_{i=1}^{\infty}}とする．
          \eqn(${
            \exists M \in \mathbb{R}, \forall i \in \mathbb{N}, \forall \omega \in \mathrm{\Omega}, \abs{\app{f_i}{\omega}} \leq M \notag
          });
          を満たすとき，可測関数列${\family-array{f_i}_{i=1}^{\infty}}は一様有界であるという．
        }
      >
      +subsection{本題} <
        +theorem?:({ルベーグの有界収束定理})?:(`lebesgues-bounded-convergence-theorem`){
          ${#measure-sp}を測度空間，${\app{m}{\mathrm{\Omega}} < \infty}とする．
          一様有界な可測関数列${\family-array{f_i}_{i=1}^{\infty}}が可測関数${f}に概収束するならば，
          \eqn(${
            \lim_{i \to \infty} \int f_i \ dm = \int f \ dm \notag
          });
        }
        +proof<
          +p{
            \eqn(${
              N \coloneq \set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \app{f_i}{\omega} \neq \app{f}{\omega}} \notag
            });
            とおく．
            ${f_i \to f \ a.e.}なので，${\app{m}{N} = 0}．
            よって，
            \AZMathEquation.align(${
              |\int_{N^\complement} f_n \ dm |= \int f_n \ dm \notag
              |\int_{N^\complement} f \ dm |= \int f \ dm \notag
            |});
            \eqn(${
              M \coloneq \sup \set-intentional{\abs{\app{f_i}{\omega}}}{i \in \mathbb{N}} \notag
            });
            とおくと，${\family-array{f_i}_{i=1}^{\infty}}が一様有界なので，${M < \infty}．
          }
          +p{
            lem \ref(`lem:Fatous-lemma`);より，
            \AZMathEquation.align(${
              | \int \liminf_{i \to \infty} \paren{M + f_i} \ dm |\leq \liminf_{i \to \infty} \int \paren{M + f_i} \ dm \label!(`lebesgues-bounded-convergence-theorem-1`)
              | \int \liminf_{i \to \infty} \paren{M - f_i} \ dm |\leq \liminf_{i \to \infty} \int \paren{M - f_i} \ dm \label!(`lebesgues-bounded-convergence-theorem-2`)
            |});
            よって，
            \AZMathEquation.align(${
              | \int \liminf_{i \to \infty} \paren{M + f_i} \ dm |= \int M + \liminf_{i \to \infty} f_i \ dm \notag
              |                                                  |= M \app{m}{\mathrm{\Omega}} + \int \liminf_{i \to \infty} f_i \ dm \notag
              |                                                  |= M \app{m}{\mathrm{\Omega}} + \int_{N^\complement} \liminf_{i \to \infty} f_i \ dm \notag
              |                                                  |= M \app{m}{\mathrm{\Omega}} + \int_{N^\complement} \liminf_{i \to \infty} f \ dm \text!{（∵def\ref(`def:approximate-convergence`);(1)より，${N^\complement}上で関数が一致）}\notag
              |                                                  |= M \app{m}{\mathrm{\Omega}} + \int \liminf_{i \to \infty} f \ dm \label!(`lebesgues-bounded-convergence-theorem-3`)
              |                                                  |\leq \liminf_{i \to \infty} \int \paren{M + f_i} \ dm \text!{（∵\ref-eq(`lebesgues-bounded-convergence-theorem-1`);）}\notag 
              |                                                  |= \liminf_{i \to \infty} \paren{M \app{m}{\mathrm{M}} + \int f_i \ dm }\notag 
              |                                                  |= M \app{m}{\mathrm{M}} + \liminf_{i \to \infty} \int f_i \ dm \label!(`lebesgues-bounded-convergence-theorem-4`)
            |});
            \ref-eq(`lebesgues-bounded-convergence-theorem-3`);，\ref-eq(`lebesgues-bounded-convergence-theorem-4`);の比較により，
            ${f = \lim_{i \to \infty} f_i = \liminf_{i \to \infty} f_i}なので，
            \eqn(${
              \int f \ dm \leq \liminf_{i \to \infty} \int f_i \ dm \label!(`lebesgues-bounded-convergence-theorem-5`)
            });
            また，
            \AZMathEquation.align(${
              | \liminf_{i \to \infty} \paren{- \app{f_i}{\omega}} |= \lim_{i \to \infty} \inf_{i \leq k} \paren{ - \app{f_k}{\omega}} \notag
              |                                                    |= \lim_{i \to \infty} \inf_{i \leq k} \paren{ - \app{f_k}{\omega}} \notag
              |                                                    |= \lim_{i \to \infty} \paren{ - \sup_{i \leq k} \app{f_k}{\omega}} \notag
              |                                                    |= - \limsup_{i \to \infty} \app{f_k}{\omega} \notag
            |});
            なので，同様に計算すると，
            \AZMathEquation.align(${
              | \int \liminf_{i \to \infty} \paren{M - f_i} \ dm |= \int M - \limsup_{i \to \infty} f_i \ dm \notag
              |                                                  |= M \app{m}{\mathrm{\Omega}} - \int \limsup_{i \to \infty} f_i \ dm \notag
              |                                                  |= M \app{m}{\mathrm{\Omega}} - \int_{N^\complement} \limsup_{i \to \infty} f_i \ dm \notag
              |                                                  |= M \app{m}{\mathrm{\Omega}} - \int_{N^\complement} \limsup_{i \to \infty} f \ dm \text!{（∵def\ref(`def:approximate-convergence`);(1)より，${N^\complement}上で関数が一致）}\notag
              |                                                  |= M \app{m}{\mathrm{\Omega}} - \int \limsup_{i \to \infty} f \ dm \label!(`lebesgues-bounded-convergence-theorem-6`)
              |                                                  |\leq \liminf_{i \to \infty} \int \paren{M - f_i} \ dm \text!{（∵\ref-eq(`lebesgues-bounded-convergence-theorem-2`);）}\notag 
              |                                                  |= \liminf_{i \to \infty} \paren{M \app{m}{\mathrm{M}} - \int f_i \ dm }\notag 
              |                                                  |= M \app{m}{\mathrm{M}} - \limsup_{i \to \infty} \int f_i \ dm \label!(`lebesgues-bounded-convergence-theorem-7`)
            |});
            \ref-eq(`lebesgues-bounded-convergence-theorem-6`);，\ref-eq(`lebesgues-bounded-convergence-theorem-7`);の比較により，
            ${f = \lim_{i \to \infty} f_i = \limsup_{i \to \infty} f_i}なので，
            \eqn(${
              \int f \ dm \geq \limsup_{i \to \infty} \int f_i \ dm \label!(`lebesgues-bounded-convergence-theorem-8`)
            });
          }
          +p{
            一般に，${\liminf_{i \to \infty} f_i \leq \limsup_{i \to \infty} f_i}だが，\ref-eq(`lebesgues-bounded-convergence-theorem-5`);，\ref-eq(`lebesgues-bounded-convergence-theorem-8`);より，
            \eqn(${
              \limsup_{i \to \infty} \int f_i \ dm  \leq \int f \ dm \leq \liminf_{i \to \infty} \int f_i \ dm  \notag
            });
            なので極限が一致し，
            \eqn(${
               \int f \ dm = \lim_{i \to \infty} \int f_i \ dm \notag
            });
            となり， 所望の結果を得る．
          }
        >
        +theorem?:({ルベーグの優収束定理})?:(`dominated-convergence-theorem`){
          ${#measure-sp}を測度空間とする．
          可測関数列${\family-array{f_i}_{i=1}^{\infty}}が可測関数${f}に概収束し，
          可積分な可測関数${g}が存在して，${\abs{\app{f_i}{\omega}} \leq \app{g}{\omega}}がほとんどいたるところで成立すれば，
          \eqn(${
            \lim_{i \to \infty} \int f_i \ dm = \int f \ dm \notag
          });
        }
        +proof<
          +p{
            \eqn(${
              N \coloneq \set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \app{f_i}{\omega} \neq \app{f}{\omega}} \notag
            });
            とおくと，${f_i \to f \ a.e.}なので${\app{m}{N} = 0}，
            \eqn(${
              G \coloneq \set-intentional{\omega \in \mathrm{\Omega}}{\exists i \in \mathbb{N}, \abs{\app{f_i}{\omega}} > \app{g}{\omega}} \notag
            });
            とおくと， ほとんどいたるところで${\abs{f_i} \leq g}なので${\app{m}{G} = 0}．
            よって，
            \AZMathEquation.align(${
              |\int_{N^\complement} f_n \ dm |= \int f_n \ dm \notag
              |\int_{G^\complement} f_n \ dm |= \int f_n \ dm \notag
              |\int_{N^\complement} f \ dm |= \int f \ dm \notag
              |\int_{G^\complement} f \ dm |= \int f \ dm \notag
            |});
          }
          +p{
            lem \ref(`lem:Fatous-lemma`);より，
            測度0である${G}以外でファトゥの補題の仮定を満たすので，
            \AZMathEquation.align(${
              | \int \liminf_{i \to \infty} \paren{g + f_i} \ dm |\leq \liminf_{i \to \infty} \int \paren{g + f_i} \ dm \label!(`dominated-convergence-theorem-1`)
              | \int \liminf_{i \to \infty} \paren{g - f_i} \ dm |\leq \liminf_{i \to \infty} \int \paren{g - f_i} \ dm \label!(`dominated-convergence-theorem-2`)
            |});
            よって，
            \AZMathEquation.align(${
              | \int \liminf_{i \to \infty} \paren{g + f_i} \ dm |= \int g + \liminf_{i \to \infty} f_i \ dm \notag
              |                                                  |= \int g \ dm + \int \liminf_{i \to \infty} f_i \ dm \notag
              |                                                  |= \int g \ dm + \int_{N^\complement} \liminf_{i \to \infty} f_i \ dm \notag
              |                                                  |= \int g \ dm + \int_{N^\complement} \liminf_{i \to \infty} f \ dm \text!{（∵def\ref(`def:approximate-convergence`);(1)より，${N^\complement}上で関数が一致）}\notag
              |                                                  |= \int g \ dm + \int \liminf_{i \to \infty} f \ dm \label!(`dominated-convergence-theorem-3`)
              |                                                  |\leq \liminf_{i \to \infty} \int \paren{g + f_i} \ dm \text!{（∵\ref-eq(`dominated-convergence-theorem-1`);）}\notag 
              |                                                  |= \liminf_{i \to \infty} \paren{\int g \ dm + \int f_i \ dm }\notag 
              |                                                  |= \int g \ dm + \liminf_{i \to \infty} \int f_i \ dm \label!(`dominated-convergence-theorem-4`)
            |});
            \ref-eq(`dominated-convergence-theorem-3`);，\ref-eq(`dominated-convergence-theorem-4`);の比較により，
            ${f = \lim_{i \to \infty} f_i = \liminf_{i \to \infty} f_i}であることと，${g}が可積分であることから${\int g \ dm < \infty}より，
            \eqn(${
              \int f \ dm \leq \liminf_{i \to \infty} \int f_i \ dm \label!(`dominated-convergence-theorem-5`)
            });
            \AZMathEquation.align(${
              | \int \liminf_{i \to \infty} \paren{g - f_i} \ dm |= \int g - \limsup_{i \to \infty} f_i \ dm \notag
              |                                                  |= \int g \ dm - \int \limsup_{i \to \infty} f_i \ dm \notag
              |                                                  |= \int g \ dm - \int_{N^\complement} \limsup_{i \to \infty} f_i \ dm \notag
              |                                                  |= \int g \ dm - \int_{N^\complement} \limsup_{i \to \infty} f \ dm \text!{（∵def\ref(`def:approximate-convergence`);(1)より，${N^\complement}上で関数が一致）}\notag
              |                                                  |= \int g \ dm - \int \limsup_{i \to \infty} f \ dm \label!(`dominated-convergence-theorem-6`)
              |                                                  |\leq \liminf_{i \to \infty} \int \paren{g - f_i} \ dm \text!{（∵\ref-eq(`dominated-convergence-theorem-2`);）}\notag 
              |                                                  |= \liminf_{i \to \infty} \paren{\int g \ dm - \int f_i \ dm }\notag 
              |                                                  |= \int g \ dm - \limsup_{i \to \infty} \int f_i \ dm \label!(`dominated-convergence-theorem-7`)
            |});
            \ref-eq(`dominated-convergence-theorem-6`);，\ref-eq(`dominated-convergence-theorem-7`);の比較により，
            ${f = \lim_{i \to \infty} f_i = \limsup_{i \to \infty} f_i}なので，
            \eqn(${
              \int f \ dm \geq \limsup_{i \to \infty} \int f_i \ dm \label!(`dominated-convergence-theorem-8`)
            });
          }
          +p{
            よって，
            \eqn(${
               \int f \ dm = \lim_{i \to \infty} \int f_i \ dm \notag
            });
            となり， 所望の結果を得る．
          }
        >
        +lemma?:({マルコフ不等式})?:(`markovs-ineqality`){
          ${#measure-sp}を測度空間，
          ${f\colon-rel \mathrm{\Omega} \to \mathbb{R}^{+}}を非負値可測関数とする．
          このとき以下が成り立つ．
          \eqn(${
            \forall a > 0, \app{m}{f^{-1}\closeclosebracket{a,\infty}} \leq \frac{\int f \ dm}{a} \notag
          });
        }
        +proof<
          +p{
            任意の${a > 0}について，
            \AZMathEquation.align(${
              |\int f \ dm |\geq \int_{f^{-1}\closeclosebracket{a,\infty}} f \ dm \notag
              |            |\geq \int_{f^{-1}\closeclosebracket{a,\infty}} a \cdot 1_{f^{-1}\closeclosebracket{a,\infty}} \ dm \notag
              |            |= a \cdot \int_{f^{-1}\closeclosebracket{a,\infty}} 1_{f^{-1}\closeclosebracket{a,\infty}} \ dm \notag
              |            |= a \cdot \app{m}{f^{-1}\closeclosebracket{a,\infty}} \notag
            |});
            より辺々${a}で割ることで示せた．
          }
        >
        +corollary?*?*{
          ${#measure-sp}を測度空間，
          可測関数列${\family-array{f_i}_{i=1}^{\infty}}が単調増加，${\sup \set-intentional{\int\abs{f_i} \ dm }{i \in \mathbb{N}} < \infty}とする．
          このとき，${\lim_{i \to \infty} \app{f_i}{\omega}}はほとんどいたるところで収束し，
          \eqn(${
            \lim_{i \to \infty} \int f_i \ dm = \int \lim_{i \to \infty} f_i \ dm \notag
          });
        }
        +proof<
          +p{
            ${\family-array{f_i}_{i=1}^{\infty}}が単調増加なので，
            \AZMathEquation.align(${
              |\set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \app{f_i}{\omega} = \infty}
                |= \bigcap_{k=1}^\infty \set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \app{f_i}{\omega} > k} \notag
              | |= \bigcap_{k=1}^\infty \bigcup_{i=1}^{\infty} \set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \app{f_i}{\omega} > k} \notag
            |});
            で，${\set-intentional{\omega \in \mathrm{\Omega}}{\app{f_n}{\omega} >i}}が${i}に関して単調増加なので，その測度は，
            \AZMathEquation.align(${
              |\app{m}{\set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \app{f_i}{\omega} = \infty}}
                |= \app{m}{\bigcap_{k=1}^\infty \bigcup_{i=1}^{\infty} \set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \app{f_i}{\omega} > k}} \notag
              | |\leq \app{m}{\bigcup_{i=n}^{\infty} \set-intentional{\omega \in \mathrm{\Omega}}{\app{f_i}{\omega} > n}} \paren{\forall n \in \mathbb{N}} \notag
              | |= \lim_{i \to \infty} \app{m}{\set-intentional{\omega \in \mathrm{\Omega}}{\app{f_i}{\omega} > n}} \text!{（∵thm \ref(`thm:measurable-set-properties`); (4)）} \notag
              | |= \sup_{i \geq 1} \app{m}{\set-intentional{\omega \in \mathrm{\Omega}}{\app{f_i}{\omega} > n}} \text!{（∵${\lim \leq \sup}）} \notag
              | |\leq \frac{\sup_{i \geq 1} \int \abs{f_i} \ dm}{n} \text!{（∵ lem \ref(`lem:markovs-ineqality`);）} \notag
            |});
            仮定より，${\sup \set-intentional{\int\abs{f_i} \ dm }{i \in \mathbb{N}} < \infty}で，
            ${n}は任意にとっていいので，
            \eqn(${
              \app{m}{\set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \app{f_i}{\omega} = \infty}} = 0 \notag
            });
            一方，${f_i}の単調増加性から，${f_1}での${\brace{-\infty}}に対する逆像をみればいいが，
            \eqn(${
              \app{m}{\set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \app{f_i}{\omega} = -\infty}} > 0 \notag
            });
            とすれば， ${f_i}の可積分性に反するので測度は0である．
          }
          +p{
            以上より，ほとんどいたるところで極限${\app{f}{\omega} \coloneq \lim_{i \to \infty} \app{f_i}{\omega}}が存在し，lem\ref(`lem:measurable-function-charactors-2`);(4)より${f}は可測になる．
            この${f}について，
            \AZMathEquation.align(${
              |\int \lim_{i \to \infty} \abs{f_i} \ dm |= \int \liminf_{i \to \infty} \abs{f_i} \ dm  \notag
              |                                  |\leq \liminf_{i \to \infty} \int \abs{f_i} \ dm \text!{∵ lem \ref(`lem:Fatous-lemma`);} \notag
              |                                  |\leq \sup \set-intentional{\int\abs{f_i} \ dm }{i \in \mathbb{N}} < \infty\notag
            |});
            なので可積分である．
            ${\mathrm{\Omega_f} \coloneq \set-intentional{\omega \in \mathrm{\Omega}}{\lim_{i \to \infty} \abs{\app{f_i}{\omega}} < \infty}}
            とおくと，可測関数の一点に対する逆像は可測なので，${\mathrm{\Omega_f} \in \mathfrak{B}}．
            よって，thm \ref(`thm:dominated-convergence-theorem`); で${g = f}をとれば仮定を満たすので，
            \eqn(${
              \int f \ dm = \int_\mathrm{\Omega_f} f \ dm = \lim_{i \to \infty} \int_\mathrm{\Omega_f} f_i \ dm = \lim_{i \to \infty} \int f \ dm \notag
            });
          }
        >
      >
    >
    >
  >

  +chapter{測度の構成} <
    +section{準備} <
      +definition?:({Algebra})?:(`algebra`){
        集合${\mathrm{\Omega}}上の集合族${\mathcal{A}}が以下を満たすとき，${\mathcal{A}}を代数(Algebra, alg.)という．
        \enumerate{
          * ${\emptyset \in \mathcal{A}}
          * ${A \in \mathcal{A} \Rightarrow A^\complement \in  \mathcal{A}}
          * ${A, B \in \mathcal{A} \Rightarrow A \cup B \in \mathcal{A}}
        }
      }
      +definition?:({有限加法的測度})?:(`finitely-additive-measure`){
        alg. ${\mathcal{A}}上の集合関数 ${m\colon-rel \mathcal{A} \to \mathbb{R}^+}が以下を満たすとき，${m}を有限加法的測度という．
        \enumerate{
          * ${\forall A \in \mathcal{A}, \app{m}{A} \geq 0 \land \app{m}{\emptyset} = 0}
          * ${\paren{A, B \in \mathcal{A} \land A \cap B = \emptyset } \Rightarrow \app{m}{A \cup B} = \app{m}{A} + \app{m}{B}}
        }
      }
      +definition?:({外測度})?:(`outer-measure`){
        集合関数${\outer-measure{m} \colon-rel 2^{\mathrm{\Omega}} \to \mathbb{R}^+}が以下を満たすとき，${\outer-measure{m}}を外測度という．
        \enumerate{
          * ${\app{\outer-measure{m}}{\emptyset} = 0}
          * ${A \subset B \subset \mathrm{\Omega} \Rightarrow \app{\outer-measure{m}}{A} \leq \app{\outer-measure{m}}{B}}
          * ${A_i \subset \mathrm{\Omega} \paren{i \in \mathbb{N}} \Rightarrow \app{\outer-measure{m}}{\bigcup_{i \in \mathbb{N}} A_i} \leq \sum_{i \in \mathbb{N}}\app{\outer-measure{m}}{ A_i}}
        }
      }
      +definition?:({可測集合})?:(`measurable-set-of-outer-measure`){
        外測度${\outer-measure{m}}が${\mathrm{\Omega}}上に定義されているとき，
        \eqn(${
          \forall E \subset \mathrm{\Omega}, \app{\outer-measure{m}}{E} = \app{\outer-measure{m}}{A \cap E} + \app{\outer-measure{m}}{A^\complement \cap E} \label!(`measurable-set-of-outer-measure-1`)
        });
        を満たす集合${A \subset \mathrm{\Omega}}を可測集合（または端的に可測）とよび，その集合全体を${\mathfrak{B}_{\outer-measure{m}}}とかく．
      }
      +p{
        以下の文脈ではdef\ref(`def:measurable-space`);での可測集合ではないことに注意する．
      }
      +lemma?*?:(`measurable-set-of-outer-measure-requrements`) {
        外測度${\outer-measure{m}}に対して，${A \subset \mathrm{\Omega}}が以下を満たせば${A}は可測集合である．
        \eqn(${
          \forall E \subset \mathrm{\Omega}, \app{\outer-measure{m}}{E} \geq \app{\outer-measure{m}}{A \cap E} + \app{\outer-measure{m}}{A^\complement \cap E} \label!(`measurable-set-of-outer-measure-requrements-1`)
        });
      }
      +proof<
        +p{
          def\ref(`def:outer-measure`);(3)より，
          \eqn(${
            \app{\outer-measure{m}}{E} \leq \app{\outer-measure{m}}{A \cap E} + \app{\outer-measure{m}}{A^\complement \cap E} \notag
          });
          なので，式\ref-eq(`measurable-set-of-outer-measure-requrements-1`); を満たせば，
          式\ref-eq(`measurable-set-of-outer-measure-1`);をみたす．
        }
      >
      +section{本題} <
        +proposition?*?:(`outer-measure-from-finitely-additive-measure`){
          ${\mathcal{A}}を${\mathrm{\Omega}}上のalg.，
          ${m}を${\mathcal{A}}上の有限加法的測度とする．
          集合関数${\outer-measure{m} \colon-rel 2^{\mathrm{\Omega}} \to \mathbb{R}^+}を，任意の${B \subset \mathrm{\Omega}}に対して
          \eqn(${
            \app{\outer-measure{m}}{B} \coloneq \inf_{A_i \in \mathcal{A}, B \subset \bigcup_{i \in \mathbb{N}} A_i} \sum_{i \in \mathbb{N}} \app{m}{A_i} \notag
          });
          で与えると，この${\outer-measure{m}}は外測度となる．
        }
        +proof<
          +p{def\ref(`def:outer-measure`);のそれぞれを確認すればよい．}
          +p{
            (1) 
            定義より${\forall B \subset \mathrm{\Omega}, \app{\outer-measure{m}}{B} \geq 0}．
            ${\emptyset}は${\emptyset}を被覆し，その有限加法的測度は下限の${0}を取るので，
            \eqn(${
              \app{\outer-measure{m}}{\emptyset} \leq \app{m}{\emptyset} = 0 \notag
            });
            よって，${\app{\outer-measure{m}}{\emptyset} = 0}
          }
          +p{
            (2) ${A \subset B}とする．
            ${B}を被覆するどのような高々加算個の${\mathcal{A}}の族${\family-array{B_i}}についても${A}の被覆となっているので，
            \AZMathEquation.align(${
              | \app{\outer-measure{m}}{B} |= \inf_{B_i \in \mathcal{A}, B \subset \bigcup_{i \in \mathbb{N}} B_i} \sum_{i \in \mathbb{N}} \app{m}{B_i} \notag
              |                            |\geq \inf_{A_i \in \mathcal{A}, A \subset \bigcup_{i \in \mathbb{N}} A_i} \sum_{i \in \mathbb{N}} \app{m}{A_i} \notag
              |                            |=\app{\outer-measure{m}}{A} \notag
            |});
          }
          +p{
            (3) 
            それぞれの${A_i \subset \mathrm{\Omega}}について， ${\inf}の定義より，
            どのような${\epsilon > 0}に対しても，
            \eqn(${
              \app{\outer-measure{m}}{A_i} \geq \sum_{j \in \mathbb{N}} \app{m}{A'_{i,j}} - \frac{\epsilon }{2^{i}} \notag
            });
            をみたすようにそれぞれの${A_i}に対する被覆${\family-array{A'_{i,j}} \subset \mathcal{A}}がとれる．
            また，それぞれの${A_i}を被覆する集合族${\family-array{A_{i,j}}}は${\bigcup_{i \in \mathbb{N}} A_i \subset \bigcup_{i,j \in \mathbb{N}}A'_{i,j}}
            なので，
            \AZMathEquation.align(${
              | \sum_{i \in \mathbb{N}} \app{\outer-measure{m}}{A_i} |\geq \sum_{i \in \mathbb{N}} \paren{\sum_{j \in \mathbb{N}} \app{m}{A'_{i,j}} - \frac{\epsilon }{2^{i}}} \notag
              |                                                      |= \sum_{i \in \mathbb{N}} \sum_{j \in \mathbb{N}} \app{m}{A'_{i,j}} - \epsilon \notag
              |                                                      |\geq \inf_{A'_k \in \mathcal{A}, \bigcup_{i \in \mathbb{N}} A_i \subset \bigcup_{k \in \mathbb{N}} A'_k} \sum_{k \in \mathbb{N}} \app{m}{A'_k} - \epsilon \notag 
              |                                                      |=\app{\outer-measure{m}}{\bigcup_{i \in \mathbb{N}} A_i}  - \epsilon \notag
            |});
            以上より，${\epsilon}は任意にとってよかったので，
            \eqn(${
              \sum_{i \in \mathbb{N}} \app{\outer-measure{m}}{A_i} \geq \app{\outer-measure{m}}{\bigcup_{i \in \mathbb{N}} A_i} \notag
            });
            を得る．
          }
          +p{
            よって示せた．
          }
        >
        +theorem?*?:(`measure-from-outer-measure`){
          def\ref(`def:measurable-set-of-outer-measure`);で定めた${\mathfrak{B}_{\outer-measure{m}}}は${\sigma}代数となる．
          また，外測度${\outer-measure{m}}を${\mathfrak{B}_{\outer-measure{m}}}上に制限したものを${m}で表すと，
          ${\paren{\mathrm{\Omega}, \mathfrak{B}_{\outer-measure{m}}, m}}は測度空間になる．
        }
        +proof<
          +p{（${\mathfrak{B}_{\outer-measure{m}}}が${\sigma}代数となること）}
          +p{
            def\ref(`def:measurable-space`);を満たすことを確認すればよい．
          }
          +p{
            (1) 
            ${\forall E \subset \mathrm{\Omega}, \emptyset \cap E = \emptyset, \emptyset^\complement \cap E = E}
            なので，
            \AZMathEquation.align(${
              | \app{\outer-measure{m}}{\emptyset \cap E} + \app{\outer-measure{m}}{\emptyset^\complement \cap E} | = \app{\outer-measure{m}}{\emptyset} + \app{\outer-measure{m}}{E} \notag
              |                                                                                                   | = 0 + \app{\outer-measure{m}}{E} \notag
              |                                                                                                   | = \app{\outer-measure{m}}{E} \notag
            |});
            より，${\emptyset \in \mathfrak{B}_{\outer-measure{m}}}．
          }
          +p{
            (2)
            ${A \in \mathfrak{B}_{\outer-measure{m}}}について，
            \eqn(${
              \forall E \subset \mathrm{\Omega}, \app{\outer-measure{m}}{E} = \app{\outer-measure{m}}{A \cap E} + \app{\outer-measure{m}}{A^\complement \cap E}  \notag
            });
            を満たすが，この${A}と${A^\complement}を読み替えれば，
            ${A^\complement \in \mathfrak{B}_{\outer-measure{m}}}．
          }
          +p{
            (3)
            互いに素であるような${\mathfrak{B}_{\outer-measure{m}}}の族${\family-array{A_i}}について，
            \eqn(${
              \forall E \subset \mathrm{\Omega}, \app{\outer-measure{m}}{E} = \app{\outer-measure{m}}{\paren{\bigcup_{i \in \mathbb{N}} A_i} \cap E} + \app{\outer-measure{m}}{\paren{\bigcup_{i \in \mathbb{N}} A_i}^\complement \cap E}  \notag
            });
            を示せば良い．
            まず，有限個の和の場合を確認し，その後，加算無限個の和について示す．
          }
          +p{
            ${A, B \in \mathfrak{B}_{\outer-measure{m}}}について，任意の${E \subset \mathrm{\Omega}}で，
            \AZMathEquation.align(${
              | \app{\outer-measure{m}}{\paren{A \cup B} \cap E} + \app{\outer-measure{m}}{\paren{A \cup B} ^ \complement \cap E} \notag
                | = \app{\outer-measure{m}}{\paren{A \cap E} \cup \paren{A^\complement \cap B \cap E}} + \app{\outer-measure{m}}{A^ \complement \cap B ^ \complement \cap E} \notag
              | | \leq \app{\outer-measure{m}}{A \cap E} + \app{\outer-measure{m}}{A^\complement \cap B \cap E} + \app{\outer-measure{m}}{A^ \complement \cap B ^ \complement \cap E} \text!{（∵def\ref(`def:outer-measure`);）} \notag
              | | \leq \app{\outer-measure{m}}{A \cap E} + \app{\outer-measure{m}}{A^\complement \cap E} \text!{（∵Bの可測性）}\notag
              | | \leq \app{\outer-measure{m}}{E} \text!{（∵Aの可測性）}\notag
            |});
            よって，lem\ref(`lem:measurable-set-of-outer-measure-requrements`);より${A \cup B \in \mathfrak{B}_{\outer-measure{m}}}で，有限個の和について閉じていることが示せた．
          }
          +p{
            また，互いに素な${A, B \subset \mathrm{\Omega}}について，
            ${A \cup B \subset \mathrm{\Omega}}について， ${\inf}の定義より，
            どのような${\epsilon > 0}に対しても，
            \eqn(${
              \app{\outer-measure{m}}{A \cup B} \geq \sum_{j \in \mathbb{N}} \app{m}{A_{i,j}} - \epsilon \notag
            });
            をみたすようにそれぞれの${A \cup B}に対する被覆${\family-array{A_{i,j}} \subset \mathcal{A}}がとれる．
            よって，そのような被覆に対して，${\family-array{A_{i,j} \cap A}}が${A}の，${\family-array{A_{i,j} \cap B}}が${B}の被覆になっていることに注意すると，
            \AZMathEquation.align(${
              | \app{\outer-measure{m}}{A \cup B} | \geq \sum_{j \in \mathbb{N}} \app{m}{A_{i,j}} - \epsilon \notag
              |                                   | = \sum_{j \in \mathbb{N}} \app{m}{\paren{A_{i,j} \cap A} \cup \paren{A_{i,j} \cap B} \cup \paren{A_{i,j} - \paren{A \cup B}}}  - \epsilon \notag
              |                                   | = \sum_{j \in \mathbb{N}} \paren{\app{m}{A_{i,j} \cap A} + \app{m}{A_{i,j} \cap B} + \app{m}{A_{i,j} - \paren{A \cup B}}}  - \epsilon \text!{（∵def\ref(`def:finitely-additive-measure`);(2)）}\notag
              |                                   | \geq \sum_{j \in \mathbb{N}} \paren{\app{m}{A_{i,j} \cap A} + \app{m}{A_{i,j} \cap B}}  - \epsilon \text!{（∵def\ref(`def:finitely-additive-measure`);(1)）}\notag
              |                                   | = \sum_{j \in \mathbb{N}} \app{m}{A_{i,j} \cap A} + \sum_{j \in \mathbb{N}}\app{m}{A_{i,j} \cap B}  - \epsilon \notag
              |                                   | \geq \inf_{A'_i \in \mathcal{A}, A \subset \bigcup_{i \in \mathbb{N}} A'_i} \sum_{i \in \mathbb{N}} \app{m}{A'_i} + \inf_{B'_i \in \mathcal{A}, B \subset \bigcup_{i \in \mathbb{N}} B'_i} \sum_{i \in \mathbb{N}} \app{m}{B'_i}  - \epsilon \notag
              |                                   | = \app{\outer-measure{m}}{A} + \app{\outer-measure{m}}{B}  - \epsilon \notag
            |});
            以上より，${\epsilon}は任意にとってよかったので，def\ref(`def:outer-measure`);(3)と合わせて，
            \eqn(${
              \app{\outer-measure{m}}{A \cup B} = \app{\outer-measure{m}}{A} + \app{\outer-measure{m}}{B}  \notag
            });
            を得る．
          }
          +p{
            加算無限個の和について確認する．
            互いに素であるような${\mathfrak{B}_{\outer-measure{m}}}の族${\family-array{A_i}}について，任意の${n \in \mathbb{N}}，${E \subset \mathrm{\Omega}}について，
            \AZMathEquation.align(${
              | \app{\outer-measure{m}}{E} | = \app{\outer-measure{m}}{\paren{\bigcup_{i = 1}^n A_i} \cap E} + \app{\outer-measure{m}}{\paren{\bigcup_{i = 1}^n A_i}^\complement \cap E} \notag
              |                            | \geq \app{\outer-measure{m}}{\paren{\bigcup_{i = 1}^n A_i} \cap E} + \app{\outer-measure{m}}{\paren{\bigcup_{i = 1}^\infty A_i}^\complement \cap E} \ \paren{\text!{∵def\ref(`def:outer-measure`);(2)， ${\paren{\bigcup_{i = 1}^n A_i}^\complement \supset \paren{\bigcup_{i = 1}^\infty A_i}^\complement}}}\notag
              |                            | = \sum_{i = 1}^n \app{\outer-measure{m}}{A_i \cap E} + \app{\outer-measure{m}}{\paren{\bigcup_{i = 1}^\infty A_i}^\complement \cap E} \notag
            |});
            より，${n \to \infty}にすると．
            \AZMathEquation.align(${
              | \app{\outer-measure{m}}{E} | \geq \sum_{i = 1}^\infty \app{\outer-measure{m}}{A_i \cap E} + \app{\outer-measure{m}}{\paren{\bigcup_{i = 1}^\infty A_i}^\complement \cap E} \label!(`measure-from-outer-measure-1`)
              |                            | \geq \app{\outer-measure{m}}{\bigcup_{i = 1}^\infty A_i \cap E} + \app{\outer-measure{m}}{\paren{\bigcup_{i = 1}^\infty A_i}^\complement \cap E} \text!{（∵def\ref(`def:outer-measure`); (3)）}\notag
            |});
            以上より，lem\ref(`lem:measurable-set-of-outer-measure-requrements`);の仮定をみたしているので，
            ${\bigcup_{i \in \mathbb{N}} A_i \in \mathfrak{B}_{\outer-measure{m}}}
          }

          +p{
            （${m}が測度になること）
          }
          +p{
            (1)
            \eqn(${
              \app{m}{\emptyset} = \app{\outer-measure{m}}{\emptyset} = 0 \notag
            });
            \eqn(${
              \forall A \in \mathfrak{B}_{\outer-measure{m}}, \app{m}{A} = \app{\outer-measure{m}}{A} \geq \app{\outer-measure{m}}{\emptyset} = 0 \notag
            });
          }
          +p{ (2) }
          +p{
            式 \ref-eq(`measure-from-outer-measure-1`);について，${E = \bigcup_{i \in \mathbb{N}} A_i}を与えると，
            不等式
            \eqn(${
              \app{\outer-measure{m}}{\bigcup_{i \in \mathbb{N}} A_i} \geq \sum_{i = 1}^\infty \app{\outer-measure{m}}{A_i} \notag
            });
            を得る．def\ref(`def:outer-measure`);(3)の不等式と合わせて，
            \eqn(${
              \app{m}{\bigcup_{i \in \mathbb{N}} A_i} = \app{\outer-measure{m}}{\bigcup_{i \in \mathbb{N}} A_i} = \sum_{i = 1}^\infty \app{\outer-measure{m}}{A_i} = \sum_{i = 1}^\infty \app{m}{A_i}\notag 
            });
          }
          +p{
            よって，${\mathfrak{B}_{\outer-measure{m}}}が${\sigma}代数で，${m}が測度であることが示せた．
          }
        >

        +proposition?*?*{
          ${\mathrm{\Omega}}の部分集合の族${\mathcal{A}}に対して，${\mathcal{A}}を含む最小の${\sigma}代数が存在する．
          ここでいう最小の${\sigma}代数とは，${\mathcal{A}}を含む任意の${\sigma}代数がそれを含むという意味で最小である．
        }
        +proof<
          +p{
            ${\mathcal{A}}を含む${\sigma}代数全体を${\mathcal{F}}とおく．
            明らかに，${2^\mathrm{\Omega} \in \mathcal{F}}なので，${\mathcal{F} \neq \emptyset}．
            ${\mathcal{B} \coloneq \bigcap_{\mathcal{C} \in \mathcal{F}} \mathcal{C}}とおくと，
            この${\mathcal{B}}は${\mathcal{A}}を含む．また，
          }
          +p{
            (1) ${\mathcal{C} \in \mathcal{F}}について，${\mathcal{C}}は${\sigma}代数なので${\emptyset \in \mathcal{C}}．
            なので，${\emptyset \in \mathcal{B}}
          }
          +p{
            (2) ${B \in \mathcal{B}}について，
            ${\mathcal{C} \in \mathcal{F}}が${\sigma}代数なので，${B \in \mathcal{C} \Rightarrow B^\complement \in \mathcal{C}}．
            どの${\mathcal{C}}についても成り立つので，${B^\complement \in \mathcal{B}}
          }
          +p{
            (3) ${\family-array{B_i} \subset \mathcal{B}}について，
            ${\mathcal{C} \in \mathcal{F}}が${\sigma}代数なので，${\family-array{B_i} \subset \mathcal{C} \Rightarrow \bigcup_{i \in \mathbb{N}} B_i \in \mathcal{C}}．
            どの${\mathcal{C}}についても成り立つので，${\bigcup_{i \in \mathbb{N}} B_i \in \mathcal{B}}
          }
          +p{
            よって，${\mathcal{B}}は${\mathcal{A}}を含むような最小の${\sigma}代数である．
          }
        >
        +p{
          上の命題の元で次の定義ができる．
        }
        +definition?*?:(`sigmize`){
          ${\mathrm{\Omega}}の部分集合の族${\mathcal{A}}を含む最小の${\sigma}代数を${\app{\sigma}{\mathcal{A}}}とかき，
          ${\mathcal{A}}の生成する${\sigma}代数という．
        }

        +theorem?:({Hopfの拡張定理})?:(`hopfs-extention-theorem`){
          alg. ${\mathcal{A}}上に有限加法的測度${m}が存在するとき，
          \enumerate{
            * ${m}を${\app{\sigma}{\mathcal{A}}}上の測度に拡張できる必要十分条件は，
            任意の互いに素な${\family-array{A_i} \subset \mathcal{A}}について，
            \eqn(${
              \app{m}{\bigcup_{i \in \mathbb{N}} A_i} = \sum_{i \in \mathbb{N}} \app{m}{A_i} 
            });
            を満たすことである．（${\mathcal{A}}上だけ（${\neq \app{\sigma}{\mathcal{A}}}）の振る舞いを見れば十分）
            * さらに，${\family-array{\mathrm{\Omega}_i} \subset \mathcal{A}}で，${\mathrm{\Omega} = \bigcup_{i \in \mathbb{N}} \mathrm{\Omega}_i}
            かつ，${\app{m}{\mathrm{\Omega}_i} < \infty}をみたすものがあれば，その拡張は一意的である．
          }
        }
        +proof<
          +p{ (1) }
          +p{
            必要性は定義から明らか．
          }
          +p{
            条件の元で一つでも拡張できる物があることを示せばよい．
            prop\ref(`prop:outer-measure-from-finitely-additive-measure`);による外測度${\outer-measure{m}}を${\mathfrak{B}_{\outer-measure{m}}}に制限したものをそのまま${\outer-measure{m}}とかくと，
            thm\ref(`thm:measure-from-outer-measure`);より，${\paren{\mathrm{\Omega}, \mathfrak{B}_{\outer-measure{m}}, \outer-measure{m}}}は測度空間になる．
            ${\mathfrak{B}_{\outer-measure{m}}}は${\mathcal{A}}を含むような${\sigma}代数なので，${\app{\sigma}{\mathcal{A}}}を含む．
            よって，${\outer-measure{m}}を${\app{\sigma}{\mathcal{A}}}に制限したものをそのまま${\outer-measure{m}}とかくと，この${\outer-measure{m}}は測度である．
          }
          +p{
            ${A \in \mathcal{A}}について，
            どのような${\epsilon > 0}に対しても，
            \eqn(${
              \app{\outer-measure{m}}{A} \geq \sum_{i \in \mathbb{N}} \app{m}{A_{i}} - \epsilon  \notag 
            });
            をみたすような${A}に対する被覆${\family-array{A_{i}} \subset \mathcal{A}}がとれる．
            この族に対して，
            \eqn(${
              B_1 \coloneq A_1 \cap A, B_i \coloneq \paren{A_i \cap A} - \bigcup_{j = 1}^{i-1} B_j \math-skip!(2pt)\paren{i \in \mathbb{N}} \notag
            });
            で族${\family-array{B_i}}を与えると，この族の元は互いに素でかつ${B_i \in \mathcal{A}}，${B_i \subset A_i}，${\bigcup_{i = 1}^n B_i = \paren{\bigcup_{i = 1}^n A_i} \cap A}．
            任意の${n \in \mathbb{N}}に対して，
            \AZMathEquation.align(${
              |\app{\outer-measure{m}}{A} |\geq \sum_{i = 1}^{\infty} \app{m}{A_{i}} - \epsilon  \notag 
              |                           |\geq \sum_{i = 1}^{n} \app{m}{A_{i}} - \epsilon  \notag 
              |                           |\geq \sum_{i = 1}^{n} \app{m}{B_{i}} - \epsilon  \math-skip!(2pt) \text!{（∵${A_i \supset B_i}）}\notag 
              |                           |\geq \app{m}{\bigcup_{i = 1} ^ {n} B_{i}} - \epsilon  \math-skip!(2pt) \text!{（∵def\ref(`def:finitely-additive-measure`);）}\notag 
            |});
            なので ${n \to \infty}で，
            \eqn(${
              \app{\outer-measure{m}}{A} \geq \app{m}{\bigcup_{i = 1} ^ {\infty} B_{i}} - \epsilon = \app{m}{A} - \epsilon \notag
            });
            ${\epsilon}は任意に取ってよかったので，
            \eqn(${
              \app{\outer-measure{m}}{A} \geq \app{m}{A}\notag
            });
            を得る．
            他方，${A}は${A}を被覆するので，def\ref(`def:outer-measure`);より，
            \eqn(${
              \app{\outer-measure{m}}{A} \leq \app{m}{A}\notag
            });
            以上から，
            \eqn(${
              \app{\outer-measure{m}}{A} = \app{m}{A}\notag
            });
            を得る．　
            よって，${\outer-measure{m}}が${m}を${\app{\sigma}{\mathcal{A}}}上に拡張したもののひとつになっていることを示せた．
          }

          +p{ (2) }
          +p{
            ${\outer-measure{m}}を${\app{\sigma}{\mathcal{A}}}に制限したものの他に，${m}を拡張するような測度${m'}があるとする．
            ${A \in \app{\sigma}{\mathcal{A}}}について，
            どのような${\epsilon > 0}に対しても，
            \eqn(${
              \app{\outer-measure{m}}{A} \geq \sum_{i \in \mathbb{N}} \app{m}{A_{i}} - \epsilon  \notag 
            });
            をみたすような${A}に対する被覆${\family-array{A_{i}} \subset \mathcal{A}}がとれる．
            この${A, \family-array{A_{i}}}について，
            \AZMathEquation.align(${
              |\app{m'}{A} | \leq \app{m'}{\bigcup_{i \in \mathbb{N}} A_i} \math-skip!(2pt) \text!{（∵${m'}の${\sigma}加法性）} \notag
              |            | = \sum_{i \in \mathbb{N}} \app{m'}{A_i} \math-skip!(2pt) \text!{（∵${\family-array{A_i}}は${A}を被覆）} \notag
              |            | = \sum_{i \in \mathbb{N}} \app{m}{A_i} \math-skip!(2pt) \text!{（∵${m'}は${m}の拡張なので${\mathcal{A}}上で一致）} \notag
              |            | \leq \app{\outer-measure{m}}{A} + \epsilon  \notag
            |});
            ${\epsilon}は任意にとっていいので，
            \eqn(${
              \app{m'}{A} \leq \app{\outer-measure{m}}{A} \notag
            });
          }
          +p{
            仮定より，${\mathrm{\Omega}_i\in \mathcal{A}}，${\app{m}{\mathrm{\Omega}_i} < \infty}．
            \eqn(${
              \app{m'}{A} \leq \app{\outer-measure{m}}{A}, \app{m'}{\mathrm{\Omega}_i \cap A^\complement} \leq \app{\outer-measure{m}}{\mathrm{\Omega}_i \cap A^\complement} \notag
            });
            なので，ある${i}について${A \subset \Omega_i}のとき，
            \AZMathEquation.align(${
              | \app{m'}{\mathrm{\Omega}_i \cap A^\complement} |= \app{m'}{\mathrm{\Omega}_i} - \app{m'}{A} \notag
              |                                                |= \app{m}{\mathrm{\Omega}_i} - \app{m'}{A} \notag
              |                                                |\geq \app{\outer-measure{m}}{\mathrm{\Omega}_i} - \app{m'}{A} \math-skip!(2pt) \text!{（∵prop\ref(`prop:outer-measure-from-finitely-additive-measure`);）}\notag
              |                                                |\geq \app{\outer-measure{m}}{\mathrm{\Omega}_i} - \app{\outer-measure{m}}{A} \notag
              |                                                |= \app{\outer-measure{m}}{\mathrm{\Omega}_i \cap A^\complement} \notag
            |});
            以上より，${\app{m'}{\mathrm{\Omega}_i \cap A^\complement} = \app{\outer-measure{m}}{\mathrm{\Omega}_i \cap A^\complement}}，
            なので，
            \eqn(${
              \app{m'}{A} = \app{\outer-measure{m}}{A} \notag
            });
          }
          +p{
            一般に，${A \in \app{\sigma}{\mathcal{A}}}について，
            ${A = \bigcup_{i \in \mathbb{N}} \paren{\mathrm{\Omega}_i \cap A}}と分解できるので，
            \AZMathEquation.align(${
              | \app{m'}{A} |= \sum_{i \in \mathbb{N}} \app{m'}{\mathrm{\Omega}_i \cap A} \math-skip!(2pt) \text!{（∵${\sigma}加法性）} \notag
              |             |= \sum_{i \in \mathbb{N}} \app{\outer-measure{m}}{\mathrm{\Omega}_i \cap A} \notag
              |             |= \app{\outer-measure{m}}{A} \math-skip!(2pt) \text!{（∵${\sigma}加法性）} \notag
            |});
            なので，${\app{\sigma}{\mathcal{A}}}上で${m' = \outer-measure{m}}となり，示せた．
          }
        >
      >
    >
    +section{具体例} <
      +subsection{${\mathbb{R}}} <
        +p{ (1) alg.と有限加法的測度を構成する}
        +p{
          \eqn(${
            \mathcal{A}_{\openopenbracket{}} \coloneq \set-intentional{\bigcup_{i=1}^{\infty} \openopenbracket{a_i, b_i}}{n \in \mathbb{N}, a_1 \leq b_1 \leq a_2 \leq \cdots , a_i, b_i \in \mathbb{R}} \notag
          });
          \eqn(${
            \mathcal{A}_{\openclosebracket{}} \coloneq \set-intentional{\bigcup_{i=1}^{\infty} \openclosebracket{a_i, b_i}}{n \in \mathbb{N}, a_1 \leq b_1 \leq a_2 \leq \cdots , a_i, b_i \in \mathbb{R}} \notag
          });
          \eqn(${
            \mathcal{A}_{\closeopenbracket{}} \coloneq \set-intentional{\bigcup_{i=1}^{\infty} \closeopenbracket{a_i, b_i}}{n \in \mathbb{N}, a_1 \leq b_1 \leq a_2 \leq \cdots , a_i, b_i \in \mathbb{R}} \notag
          });
          \eqn(${
            \mathcal{A}_{\closeclosebracket{}} \coloneq \set-intentional{\bigcup_{i=1}^{\infty} \closeclosebracket{a_i, b_i}}{n \in \mathbb{N}, a_1 \leq b_1 \leq a_2 \leq \cdots , a_i, b_i \in \mathbb{R}} \notag
          });
          \eqn(${
            \mathcal{A} \coloneq \mathcal{A}_{\openopenbracket{}} \cup \mathcal{A}_{\openclosebracket{}} \cup \mathcal{A}_{\closeopenbracket{}} \cup \mathcal{A}_{\closeclosebracket{}} \notag
          });
          で定義される集合族${\mathcal{A}}に対して，集合関数${m\colon-rel \mathcal{A} \to \mathbb{R}}を，
          \eqn(${
            \mathcal{A} \ni A = 
              \bigcup_{i=1}^{\infty} \openopenbracket{a_{\openopenbracket{},i}, b_{\openopenbracket{}, i}}
              \cup \bigcup_{i=1}^{\infty} \openclosebracket{a_{\openclosebracket{},i}, b_{\openclosebracket{},i}}
              \cup \bigcup_{i=1}^{\infty} \closeopenbracket{a_{\closeopenbracket{},i}, b_{\closeopenbracket{},i}}
              \cup \bigcup_{i=1}^{\infty} \closeclosebracket{a_{\closeclosebracket{},i}, b_{\closeclosebracket{},i}} \notag
          });
          であって，どの区間に対しても互いに素となるようにかけるので，
          \eqn(${
            \app{m}{A} = 
              + \sum_{i = 1}^{\infty} b_{\openopenbracket{}, i} - a_{\openopenbracket{},i}
              + \sum_{i = 1}^{\infty} b_{\openclosebracket{},i} - a_{\openclosebracket{},i}
              + \sum_{i = 1}^{\infty} b_{\closeopenbracket{},i} - a_{\closeopenbracket{},i}
              + \sum_{i = 1}^{\infty} b_{\closeclosebracket{},i} - a_{\closeclosebracket{},i} \notag
          });
          で与えると，この${\mathcal{A}}はalg.に，${m}は有限加法的測度になる．
        }
        +p{
          これを${\app{\sigma}{\mathcal{A}}}上に拡張する．
          ${\app{\sigma}{\mathcal{A}} \ni A}について，
          \eqn(${
            \app{\outer-measure{m}}{A} \coloneq \inf_{A \subset \bigcup_{i \in \mathbb{N}} I_i, \family-array{I_i} \subset \mathcal{A}} \sum_{i \in \mathbb{N}} \app{m}{I_i} \notag
          });
          で与えると，${\paren{\mathbb{R}, \app{\sigma}{\mathcal{A}}, \outer-measure{m}}}は測度空間になる．
          thm\ref(`thm:hopfs-extention-theorem`);(1)より，${\outer-measure{m}}は${m}の拡張になっている．
          また，${I_i = \closeclosebracket{i, i+1}}とおくと，${\app{m}{I_i} = i+1 - i = 1 < \infty}かつ，${\bigcup_{i \in \mathbb{Z}} I_i = \mathbb{R}}なので，
          thm\ref(`thm:hopfs-extention-theorem`);(2)より，上の測度空間は${m}から拡張される一意的な測度空間である．
          （この${\sigma}代数をBorel集合，測度をBorel測度という）
        }
        +p{
          この測度空間の元で，${\mathbb{Q}}の測度を確認してみる．
        }
        +p{
          まず，${\mathbb{Q}}が可測かを確認する．
          ${q \in \mathbb{Q}}に対して，${\closeclosebracket{q, q}}は可測．
          また，${\app{\sigma}{\mathcal{A}}}は${\sigma}代数なので，
          \eqn(${
            \bigcup_{q \in \mathbb{Q}} \closeclosebracket{q, q} = \mathbb{Q} \in \app{\sigma}{\mathcal{A}} \notag
          });
          なので可測．（${\mathfrak{B}_{\outer-measure{m}}}の元はかならずしも${\app{\sigma}{\mathcal{A}}}に含まれないが，${\mathcal{A}}の元はかならず含まれることに注意）
        }
        +p{
          ${\mathbb{Q}}の測度は, ${\outer-measure{m}}の${\sigma}加法性から，
          \eqn(${
            \app{\outer-measure{m}}{\mathbb{Q}} = \app{\outer-measure{m}}{\bigcup_{q \in \mathbb{Q}} \closeclosebracket{q, q}} = \sum_{q \in \mathbb{Q}}\app{\outer-measure{m}}{ \closeclosebracket{q, q}}  = \sum_{q \in \mathbb{Q}}\app{m}{ \closeclosebracket{q, q}} = 0 \notag
          });
        }
        +p{
          ${\app{f}{x} = x}を考える．
          \eqn(${
            \set-intentional{x \in \mathbb{R}}{\app{f}{x} > a} = \openclosebracket{a, \infty} \in \mathcal{A} \notag
          });
          なので${f}は可測関数である．
          この測度空間での${\closeclosebracket{a,b}}上の積分は，
          \AZMathEquation.align(${
            | \int_\closeclosebracket{a,b} f \ dm |= \lim_{n \to \infty} \sum_{i = 0}^{n-1} \int \paren{a + \frac{i}{n} \paren{b - a}} \cdot I_\closeopenbracket{a + \frac{i}{n} \paren{b - a}, a + \frac{i+1}{n} \paren{b - a}} \ dm \notag 
            |                                     |= \lim_{n \to \infty} \sum_{i = 0}^{n-1} \paren{a + \frac{i}{n} \paren{b - a}} \cdot \frac{1}{n}\paren{b - a} \notag
            |                                     |= \lim_{n \to \infty} \frac{1}{n}\paren{b - a}\sum_{i = 0}^{n-1} \paren{a + \frac{i}{n} \paren{b - a}} \notag
            |                                     |= \lim_{n \to \infty} \frac{1}{n}\paren{b - a} \paren{an + \frac{1}{2} \paren{n-1} \paren{b - a}} \notag
            |                                     |= \lim_{n \to \infty} \frac{1}{n}\paren{b - a} \paren{\frac{1}{2} \paren{n-1} \paren{b + a} + a} \notag
            |                                     |= \lim_{n \to \infty} \paren{b - a} \paren{\frac{1}{2} \frac{n-1}{n} \paren{b + a} + \frac{a}{n}} \notag
            |                                     |= \paren{b - a} \frac{1}{2} \paren{b + a} \notag
            |                                     |= \frac{b^2 - a^2}{2} \notag
          |});
          なので，通常のリーマン積分と一致することがわかる．
        }
        +p{
          この議論では${\mathcal{A}}をずいぶんと豪勢に構成したが，${\app{\sigma}{\mathcal{A}}}を作るだけなら，${\mathcal{A}}を構成するどれかを含む最小の${\sigma}代数をもってこればそれと一致する．
          証明はつけないが，lem\ref(`lem:measurable-function-charactors`);と同様の議論によって示すことができる．
        }
      >
      +subsection{確率} <
        +p{
          サイコロの例を考える．
        }
        +p{
          集合${\mathrm{\Omega}_i}（${i = 1, 2, 3, 4, 5, 6}）に対して，${\mathrm{\Omega} = \bigcup_{i=1}^{6} \mathrm{\Omega}_i}とおき，0個以上の${\mathrm{\Omega}_i}の和の族を${\mathfrak{B}}とおく．
          また，測度${P}を${\app{P}{\Omega_i} = \frac{1}{6}}（２つ以上の事象の和の測度も同様に定義する）とおく（${\app{P}{\mathrm{\Omega}} = 1}となるような${P}を一般に確率測度とよぶ．）と，
          ${\paren{\Omega, \mathfrak{B}, P}}で測度空間になる．
        }
        +p{
          ${X}を${\app{X}{\omega} \coloneq i \math-skip!(2pt) \text!{（if ${\omega \in \mathrm{\Omega}_i}）}}で与えると，これは可測関数となる
          （これによってサイコロが定義される）．
          ${X}に対する平均値${\app{E}{X}}を
          \eqn(${
            \app{E}{X} \coloneq \int X \ dP \notag
          });
          で与えると，このサイコロの平均値は，
          \eqn(${
            \app{E}{X} \coloneq \int X \ dP \notag = \sum_{i = 1}^{6} \app{X}{\mathrm{\Omega}_i} \app{P}{\mathrm{\Omega}_i} = \sum_{i = 1}^{6} i \cdot \frac{1}{6} = \frac{7}{2}
          });
          となり，我々の知る平均値が現れる．
        }
        +p{
          連続分布についても同様の議論ができる．
          ${f_X}を確率密度関数とする．
          ${\sigma}代数としてBorel集合を，その確率測度を${\app{P}{\brace{a}} = \app{f_X}{a}}
          を満たすように定め，その上での可測関数を${\app{X}{\brace{a}} = a}とおくと，
          \eqn(${
            \app{E}{X} = \int X \ dP \notag = \int \app{X}{\brace{a}} \app{P}{\brace{a}} = \int_{-\infty}^{\infty} x \app{f_X}{x} \ dx
          });
          となって，我々の知る期待値の計算にできる．
        }
      >
    >
  >

  +chapter{確認事項}<
    +section{well-definedness}<
      +subsection{${\sup, \inf}} <
        +definition{
          ${\mathfrak{R} \subset 2^{\mathbb{R}^{*}}}とする．
          ${\sup \colon-rel \mathfrak{R} \to \mathbb{R}^{*}}を，${S \in \mathfrak{R}}について，
          \eqn(${
            \forall c \in S, c \leq \app{\sup}{S}
            \land \forall \epsilon > 0, \exists c \in \mathfrak{R}, \app{\sup}{S} < c + \epsilon \notag
          });
          として定める．
          また，${\inf \colon-rel \mathbb{R} \to \mathbb{R}^{*}}を，${S \in \mathfrak{R}}について，
          \eqn(${
            \forall c \in S, c \geq \app{\inf}{S}
            \land \forall \epsilon > 0, \exists c \in \mathbb{R}, c < \app{\inf}{S} + \epsilon \notag
          });
          として定める．
        }
        +p{
          この定義では，論理式を満たす値が存在するか，存在すればただ一つに決まるかを確認しなければならない．
          ${\sup}について確認する．${\inf}も適切に読み替えることで確認できる．
          \listing{
            %% mada hajime %%
            *（存在性）
            ${R \coloneq \set-intentional{r \in \mathbb{R}}{\forall c \in S, c \leq r}}について考えると，特に${\infty}を含むのでこの集合は非空である．
            ${c \in \mathbb{R}^{*} \suchthat \paren{\forall s \in S, s > c \land \forall r \in R, c \leq r}}
            について考えると，この${c}は${R}に入ってなければならないので，Rは最小の元${c}が取れる．
            ${R}の定義から，この${c}は${\forall \epsilon > 0, \exists s \in S, c - s < \epsilon}をみたすので，
            存在が確認できた．
            %% mada owari %%
            *（一意性）論理式を満たすものが2つ取れたとする．これを${x,y \paren{x < y}}と置く．
            このとき定義から，
            ${ \forall \epsilon > 0, \exists c \in \mathbb{R}, c \geq x < y < c + \epsilon }
            だが，任意の${\epsilon > 0}についてこれが言えるので，${x=y}．
          }
        }
      >
    >
  >
  +chapter{参考文献}<
    +enumerate{
      * 森真，ルベーグ積分超入門 -数理解析や数理ファイナンス理解のために- ，共立出版，2004
    }
  >

>